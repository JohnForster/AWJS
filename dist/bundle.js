!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t){this.tileData=t.data.sprites}return t.prototype.render=function(t){if(t&&(this.map=t),!this.map)throw new Error("No map to render.");return!t&&this.mapCanvas?this.mapCanvas:this.draw(t)},t.prototype.loadMap=function(t){this.map=t},t.prototype.draw=function(t){var e=this,n=document.createElement("canvas"),r=n.getContext("2d");return this.map.data.forEach(function(t,n){t.forEach(function(t,o){var i=o*e.tileData[t].w,a=n*e.tileData[t].h;r.putImageData(e.tileData[t].imageData,i,a)})}),this.mapCanvas=n,n},t}(),o=function(){function t(t,e){this.spritesheetData=e,this.cursor=t}return t.prototype.render=function(){return this.cursor.position===this.lastCursorPosition?this.cursorCanvas:this.draw()},t.prototype.draw=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n=this.spritesheetData.data.sprites[0],r=this.cursor.getTopLeftPixelCoordinates(),o=r.x,i=r.y;return e.putImageData(n.imageData,o,i),this.cursorCanvas=t,t},t}(),i=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=function(){function t(){}return t.load=function(e){return i(this,void 0,void 0,function(){var n,r;return a(this,function(o){switch(o.label){case 0:return[4,t.addImageProcess(e.path)];case 1:return n=o.sent(),r=t.getContext(n),e.data.sprites.forEach(function(e){e.imageData=t.getImageData(e,r)}),[2]}})})},t.getContext=function(e){var n=t.setupCanvas(e).getContext("2d");return n.drawImage(e,0,0),n},t.setupCanvas=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e},t.addImageProcess=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(t){return n(t)},r.src=t})},t.getImageData=function(t,e){var n=t.x,r=t.y,o=t.w,i=t.h;return e.getImageData(n,r,o,i)},t}(),u={path:"assets/spriteSheet.png",data:{type:"terrain",sprites:[{id:0,name:"grass",x:217,y:1567,w:16,h:16},{id:1,name:"sea",x:340,y:1567,w:16,h:16}]}},c={path:"assets/UISprites.png",data:{type:"UI",sprites:[{id:0,name:"cursor",x:44,y:6,w:28,h:31}]}},p=function(){function t(t){this.gameCanvas=this.setupMainCanvas(),this.gameContext=this.gameCanvas.getContext("2d"),s.load(u),s.load(c),this.bgRenderer=new r(u),this.uiRenderer=new o(t,c)}return t.prototype.loadMap=function(t){this.bgRenderer.loadMap(t)},t.prototype.render=function(){var t=this;console.log(this),this.getCanvases(this.bgRenderer).forEach(function(e){t.gameContext.drawImage(e,0,0)})},t.prototype.setupMainCanvas=function(){var t=document.getElementById("canvas");return t.height=600,t.width=800,t},t.prototype.getCanvases=function(t){return[this.bgRenderer.render()]},t}(),h=function(){function t(t){this.keyMappings={upCode:87,downCode:83,leftCode:65,rightCode:68},this.cursor=t,this.handleKeyPress=this.handleKeyPress.bind(this),document.onkeypress=document.onkeydown=this.handleKeyPress}return t.prototype.handleKeyPress=function(t){var e={};e[t.keyCode]="keydown"===t.type;var n=this.keyMappings,r=n.upCode,o=n.downCode,i=n.leftCode,a=n.rightCode;e[r]&&this.cursor.move("up"),e[o]&&this.cursor.move("down"),e[i]&&this.cursor.move("left"),e[a]&&this.cursor.move("right")},t}(),f=function(){function t(){this.position={x:0,y:0}}return t.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},t.prototype.move=function(t){"up"===(t=t.toLowerCase())&&this.moveUp(),"down"===t&&this.moveDown(),"left"===t&&this.moveLeft(),"right"===t&&this.moveRight(),console.log(this.position)},t.prototype.moveUp=function(){this.position.y-=1},t.prototype.moveDown=function(){this.position.y+=1},t.prototype.moveLeft=function(){this.position.x-=1},t.prototype.moveRight=function(){this.position.x+=1},t.prototype.getTopLeftPixelCoordinates=function(){return{x:16*this.position.x-3,y:16*this.position.y-3}},t}(),d={data:[[0,0,0,1,1,0],[0,0,0,1,1,0],[0,0,1,1,1,0],[0,1,1,1,1,0],[0,0,0,1,1,0],[1,1,0,1,1,1]]},l=function(){function t(){this.cursor=new f,this.renderer=new p(this.cursor),this.controller=new h(this.cursor),this.renderer.loadMap(d)}return t.prototype.run=function(){var t=this;setInterval(function(){t.renderer.render()},2e3)},t}();(new(function(){function t(){}return t.prototype.run=function(){(new l).run()},t}())).run()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvcmVuZGVyZXIvYmdSZW5kZXJlci9iZ1JlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL3JlbmRlcmVyL1VJUmVuZGVyZXIvdWlSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9yZW5kZXJlci9zcHJpdGVTaGVldExvYWRlci9zcHJpdGVzaGVldExvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9yZW5kZXJlci9zcHJpdGVzaGVldHMvdGVycmFpblNoZWV0RGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9yZW5kZXJlci9zcHJpdGVzaGVldHMvVUlTaGVldERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvcmVuZGVyZXIvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvY29udHJvbGxlci9jb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL2N1cnNvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9lbmdpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQmdSZW5kZXJlciIsInRpbGVTaGVldERhdGEiLCJ0aGlzIiwidGlsZURhdGEiLCJkYXRhIiwic3ByaXRlcyIsInJlbmRlciIsIm1hcCIsIkVycm9yIiwibWFwQ2FudmFzIiwiZHJhdyIsImxvYWRNYXAiLCJfdGhpcyIsInRlbXBDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZW1wQ29udGV4dCIsImdldENvbnRleHQiLCJmb3JFYWNoIiwicm93Iiwicm93TnVtYmVyIiwiaWQiLCJjb2xOdW1iZXIiLCJ4IiwidyIsInkiLCJoIiwicHV0SW1hZ2VEYXRhIiwiaW1hZ2VEYXRhIiwiVUlSZW5kZXJlciIsImN1cnNvciIsInNwcml0ZVNoZWV0RGF0YSIsInNwcml0ZXNoZWV0RGF0YSIsInBvc2l0aW9uIiwibGFzdEN1cnNvclBvc2l0aW9uIiwiY3Vyc29yQ2FudmFzIiwiX2EiLCJnZXRUb3BMZWZ0UGl4ZWxDb29yZGluYXRlcyIsIlNwcml0ZXNoZWV0TG9hZGVyIiwibG9hZCIsImFkZEltYWdlUHJvY2VzcyIsInBhdGgiLCJzcHJpdGVzaGVldCIsInNlbnQiLCJzcHJpdGUiLCJnZXRJbWFnZURhdGEiLCJpbWFnZSIsImNvbnRleHQiLCJzZXR1cENhbnZhcyIsImRyYXdJbWFnZSIsImNhbnZhcyIsIndpZHRoIiwiaGVpZ2h0Iiwic3JjIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJlcnIiLCJ0ZXJyYWluc2hlZXREYXRhIiwidHlwZSIsIlVJU2hlZXREYXRhIiwicmVuZGVyZXJfUmVuZGVyZXIiLCJSZW5kZXJlciIsImdhbWVDYW52YXMiLCJzZXR1cE1haW5DYW52YXMiLCJnYW1lQ29udGV4dCIsImJnUmVuZGVyZXIiLCJ1aVJlbmRlcmVyIiwiY29uc29sZSIsImxvZyIsImdldENhbnZhc2VzIiwiZ2V0RWxlbWVudEJ5SWQiLCJDb250cm9sbGVyIiwia2V5TWFwcGluZ3MiLCJ1cENvZGUiLCJkb3duQ29kZSIsImxlZnRDb2RlIiwicmlnaHRDb2RlIiwiaGFuZGxlS2V5UHJlc3MiLCJvbmtleXByZXNzIiwib25rZXlkb3duIiwiZSIsInByZXNzZWRLZXlzIiwia2V5Q29kZSIsIm1vdmUiLCJDdXJzb3IiLCJzZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsInRvTG93ZXJDYXNlIiwibW92ZVVwIiwibW92ZURvd24iLCJtb3ZlTGVmdCIsIm1vdmVSaWdodCIsIkVuZ2luZSIsInJlbmRlcmVyIiwiY29udHJvbGxlciIsInJ1biIsInNldEludGVydmFsIiwiQXBwIiwiZ2FtZUVuZ2luZV9lbmdpbmUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFB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QUdFLE1BQU8sQ0FBQ2QsRUFGb0IsR0FBbEJyQixLQUFLK0IsU0FBU1YsRUFBUyxFQUV0QkUsRUFEaUIsR0FBbEJ2QixLQUFLK0IsU0FBU1IsRUFBUyxJQUdyQ2dFLEVBM0NBLEdDQU1sRixFQUFZLENBQ2hCSCxLQUFNLENBQ0osQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDWCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUNYLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQ1gsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDWCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUNYLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BSWYsV0FNRSxTQUFBNkYsSUFDRS9GLEtBQUs0QixPQUFTLElBQUkyRCxFQUNsQnZGLEtBQUtnRyxTQUFXLElBQUlqQyxFQUFTL0QsS0FBSzRCLFFBQ2xDNUIsS0FBS2lHLFdBQWEsSUFBSUEsRUFBV2pHLEtBQUs0QixRQUN0QzVCLEtBQUtnRyxTQUFTdkYsUUFBUUosR0FTMUIsT0FMRTBGLEVBQUFyRyxVQUFBd0csSUFBQSxlQUFBeEYsRUFBQVYsS0FDRW1HLFlBQVksV0FDVnpGLEVBQUtzRixTQUFTNUYsVUFDYixNQUVQMkYsRUFuQkEsSUNkZSxlQUFJLFNBQUFLLEtBS25CLE9BSkVBLEVBQUExRyxVQUFBd0csSUFBQSxZQUNpQixJQUFJRyxHQUNaSCxPQUVYRSxFQUxlLEtDQVhGIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IElTcHJpdGVzaGVldERhdGEsIElTcHJpdGVEYXRhIH0gZnJvbSAnLi4vc3ByaXRlc2hlZXRzL0lTcHJpdGVzaGVldERhdGEnXG5pbXBvcnQgeyBJTWFwIH0gZnJvbSAnLi4vSU1hcCdcblxuZXhwb3J0IGNsYXNzIEJnUmVuZGVyZXIge1xuICBtYXA6IElNYXA7XG4gIHRpbGVEYXRhOiBJU3ByaXRlRGF0YVtdO1xuICBtYXBDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAvLyBBbmltYXRpb24gZnJhbWU/XG5cbiAgY29uc3RydWN0b3IgKHRpbGVTaGVldERhdGE6IElTcHJpdGVzaGVldERhdGEpIHtcbiAgICB0aGlzLnRpbGVEYXRhID0gdGlsZVNoZWV0RGF0YS5kYXRhLnNwcml0ZXNcbiAgfVxuXG4gIHJlbmRlcihtYXA/OiBJTWFwKTpIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgaWYgKG1hcCkgdGhpcy5tYXAgPSBtYXBcbiAgICBpZiAoIXRoaXMubWFwKSB0aHJvdyBuZXcgRXJyb3IgKCdObyBtYXAgdG8gcmVuZGVyLicpXG4gICAgaWYgKCFtYXAgJiYgdGhpcy5tYXBDYW52YXMpIHJldHVybiB0aGlzLm1hcENhbnZhc1xuICAgIHJldHVybiB0aGlzLmRyYXcobWFwKVxuICB9XG5cbiAgbG9hZE1hcChtYXA6IElNYXApe1xuICAgIHRoaXMubWFwID0gbWFwXG4gIH1cblxuICAvLyBUaGlzIG1ldGhvZCBjb3VsZCBiZSBnZW5lcmljIGJldHdlZW4gYWxsIHJlbmRlcmVycz8gXG4gIHByaXZhdGUgZHJhdyhtYXA/OiBJTWFwKTpIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgY29uc3QgdGVtcENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjb25zdCB0ZW1wQ29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gdGVtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMubWFwLmRhdGEuZm9yRWFjaCgocm93LCByb3dOdW1iZXIpID0+IHtcbiAgICAgIHJvdy5mb3JFYWNoKChpZCwgY29sTnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHggPSBjb2xOdW1iZXIgKiB0aGlzLnRpbGVEYXRhW2lkXS53XG4gICAgICAgIGNvbnN0IHkgPSByb3dOdW1iZXIgKiB0aGlzLnRpbGVEYXRhW2lkXS5oXG4gICAgICAgIHRlbXBDb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLnRpbGVEYXRhW2lkXS5pbWFnZURhdGEsIHgsIHkpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5tYXBDYW52YXMgPSB0ZW1wQ2FudmFzIC8vIFN0b3JlIG1hcENhbnZhcyBzbyByZWNyZWF0aW5nIHRoZSBjYW52YXMgZXZlcnkgZnJhbWUgaXNuJ3QgbmVjZXNzYXJ5P1xuICAgIHJldHVybiB0ZW1wQ2FudmFzXG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSAnLi4vLi4vY3Vyc29yJ1xuaW1wb3J0IHsgSVNwcml0ZXNoZWV0RGF0YSB9IGZyb20gJy4uL3Nwcml0ZXNoZWV0cy9JU3ByaXRlc2hlZXREYXRhJztcblxuLy8gVGhpcyBjbGFzcyBpcyBhIG1lc3MuIEkgdGhpbmsgd2UgY291bGQgZml4IHRoaXMgYnkgaGF2aW5nIGEgVUlNYXAgb2JqZWN0IHRoYXRcbi8vICBhY3RzIGluIHRoZSBzYW1lIG1hbm5lciBhcyBhIHRlcnJhaW5NYXAvZW50aXR5TWFwIHR5cGUgdGhpbmcuXG4vLyBUT0RPIGJ1aWxkIGdlbmVyaWMgcmVuZGVyZXIgY2xhc3M/IFRha2VzIGluIGEgc3ByaXRlU2hlZXREYXRhIG9iamVjdC5cbmV4cG9ydCBjbGFzcyBVSVJlbmRlcmVyIHtcbiAgY3Vyc29yOiBDdXJzb3JcbiAgbGFzdEN1cnNvclBvc2l0aW9uOiB7eDogbnVtYmVyLCB5Om51bWJlcn1cbiAgc3ByaXRlc2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhO1xuICBjdXJzb3JDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50XG5cbiAgLy8gVE9ETyBjaGFuZ2UgVUlSZW5kZXJlciB0byB0YWtlIGluIHNvbWUgZm9ybSBvZiBVSU1hcCBvYmplY3RcbiAgLy8gIHRoYXQgY29udGFpbnMgYWxsIFVJIGRhdGE/IE9yIGV2ZW4gc29tZSBnZW5lcmljIG1hcCBvYmplY3QgXG4gIC8vICB0aGF0IGNvdWxkIGJlIHVzZWQgZm9yIHRlcnJhaW4sIHVuaXRzIEFORCBVST9cbiAgY29uc3RydWN0b3IoY3Vyc29yOkN1cnNvciwgc3ByaXRlU2hlZXREYXRhOklTcHJpdGVzaGVldERhdGEpe1xuICAgIHRoaXMuc3ByaXRlc2hlZXREYXRhID0gc3ByaXRlU2hlZXREYXRhXG4gICAgdGhpcy5jdXJzb3IgPSBjdXJzb3JcbiAgfVxuXG4gIC8vIE9uIGdlbmVyaWMgcmVuZGVyZXIgY2xhc3MsIHJlbmRlciB0YWtlcyBpbiBhIG1hcFxuICAvLyAgKCBlZy4gVUlNYXAsIHRlcnJhaW5NYXAsIGVudGl0eU1hcCkgPyBcbiAgcmVuZGVyKCk6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgICBjb25zdCBub01vdmVtZW50ID0gdGhpcy5jdXJzb3IucG9zaXRpb24gPT09IHRoaXMubGFzdEN1cnNvclBvc2l0aW9uXG4gICAgaWYgKG5vTW92ZW1lbnQpIHJldHVybiB0aGlzLmN1cnNvckNhbnZhc1xuICAgIHJldHVybiB0aGlzLmRyYXcoKVxuICB9XG5cbiAgZHJhdygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgY29uc3QgY3Vyc29ySUQgPSAwIC8vIFRISVMgU0hPVUxEIE5PVCBCRSBIQVJEIENPREVEXG4gICAgY29uc3QgdGVtcENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIGNvbnN0IHRlbXBDb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSB0ZW1wQ2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICAvLyBUaGVyZSdzIGdvdHRhIGJlIGEgYmV0dGVyIHdheSBvZiBkb2luZyB0aGlzLiBIb3cgc2hvdWxkIHRoZSBjdXJzb3Iga25vd1xuICAgIC8vICBob3cgYmlnIHRoZSB0aWxlcyBhcmU/IFNob3VsZCB0aGUgbWFpbiByZW5kZXJlciBkZWNpZGUgd2hlcmUgdG8gcmVuZGVyXG4gICAgLy8gIHRoZSBjdXJzb3I/XG4gICAgY29uc3QgY3Vyc29yID0gdGhpcy5zcHJpdGVzaGVldERhdGEuZGF0YS5zcHJpdGVzWzBdXG4gICAgY29uc3Qge3gsIHl9ID0gdGhpcy5jdXJzb3IuZ2V0VG9wTGVmdFBpeGVsQ29vcmRpbmF0ZXMoKVxuICAgIHRlbXBDb250ZXh0LnB1dEltYWdlRGF0YShjdXJzb3IuaW1hZ2VEYXRhLCB4LCB5KVxuICAgIHRoaXMuY3Vyc29yQ2FudmFzID0gdGVtcENhbnZhc1xuICAgIHJldHVybiB0ZW1wQ2FudmFzXG4gIH1cblxuXG59IiwiaW1wb3J0IHsgSVNwcml0ZXNoZWV0RGF0YSwgSVNwcml0ZURhdGEgfSBmcm9tIFwiLi4vc3ByaXRlc2hlZXRzL0lTcHJpdGVzaGVldERhdGFcIjtcblxuLy8gR2VuZXJhbGlzZSB0byBJbWFnZUxvYWRlcj9cbmV4cG9ydCBjbGFzcyBTcHJpdGVzaGVldExvYWRlciB7XG5cbiAgc3RhdGljIGFzeW5jIGxvYWQoc3ByaXRlc2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhKSB7XG4gICAgY29uc3Qgc3ByaXRlc2hlZXQgPSA8SFRNTEltYWdlRWxlbWVudD4gYXdhaXQgU3ByaXRlc2hlZXRMb2FkZXIuYWRkSW1hZ2VQcm9jZXNzKHNwcml0ZXNoZWV0RGF0YS5wYXRoKVxuICAgIGNvbnN0IHRlbXBDb250ZXh0ID0gU3ByaXRlc2hlZXRMb2FkZXIuZ2V0Q29udGV4dChzcHJpdGVzaGVldClcbiAgICBzcHJpdGVzaGVldERhdGEuZGF0YS5zcHJpdGVzLmZvckVhY2goKHNwcml0ZSkgPT4ge1xuICAgICAgc3ByaXRlLmltYWdlRGF0YSA9IFNwcml0ZXNoZWV0TG9hZGVyLmdldEltYWdlRGF0YShzcHJpdGUsIHRlbXBDb250ZXh0KVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0Q29udGV4dChpbWFnZTogSFRNTEltYWdlRWxlbWVudCl7XG4gICAgY29uc3QgY2FudmFzID0gU3ByaXRlc2hlZXRMb2FkZXIuc2V0dXBDYW52YXMoaW1hZ2UpXG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKVxuICAgIHJldHVybiBjb250ZXh0XG4gIH1cblxuICBzdGF0aWMgc2V0dXBDYW52YXMoaW1hZ2U6SFRNTEltYWdlRWxlbWVudCkge1xuICAgIGNvbnN0IGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICByZXR1cm4gY2FudmFzXG4gIH1cblxuICBzdGF0aWMgYWRkSW1hZ2VQcm9jZXNzKHNyYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGltZzpIVE1MSW1hZ2VFbGVtZW50ID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZShpbWcpO1xuICAgICAgaW1nLm9uZXJyb3IgPSAoZXJyKSA9PiByZWplY3QoZXJyKTtcbiAgICAgIGltZy5zcmMgPSBzcmM7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW1hZ2VEYXRhIChzcHJpdGU6IElTcHJpdGVEYXRhLCBjb250ZXh0OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6SW1hZ2VEYXRhIHtcbiAgICBjb25zdCB7eCwgeSwgdywgaH0gPSBzcHJpdGVcbiAgICByZXR1cm4gY29udGV4dC5nZXRJbWFnZURhdGEoeCwgeSwgdywgaClcbiAgfVxufSIsImltcG9ydCB7IElTcHJpdGVzaGVldERhdGEgfSBmcm9tICcuL0lTcHJpdGVzaGVldERhdGEnXG5cbmV4cG9ydCBjb25zdCB0ZXJyYWluc2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhID0ge1xuICBwYXRoOiAnYXNzZXRzL3Nwcml0ZVNoZWV0LnBuZycsXG4gIGRhdGE6IHtcbiAgICB0eXBlOiAndGVycmFpbicsXG4gICAgc3ByaXRlczogW1xuICAgICAge1xuICAgICAgICBpZDogMCwgXG4gICAgICAgIG5hbWU6ICdncmFzcycsXG4gICAgICAgIHg6IDIxNywgXG4gICAgICAgIHk6IDE1NjcsIFxuICAgICAgICB3OiAxNiwgXG4gICAgICAgIGg6IDE2LCBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBuYW1lOiAnc2VhJyxcbiAgICAgICAgeDogMzQwLFxuICAgICAgICB5OiAxNTY3LFxuICAgICAgICB3OiAxNixcbiAgICAgICAgaDogMTZcbiAgICAgIH1cbiAgICAgIC8vIGV0Yy4gZXRjLlxuICAgIF1cbiAgfVxufSIsImltcG9ydCB7SVNwcml0ZXNoZWV0RGF0YX0gZnJvbSAnLi9JU3ByaXRlc2hlZXREYXRhJ1xuLy8gU3RvcmUgdGhlc2UgZmlsZXMgaW4gYXNzZXRzIHdpdGggdGhlaXIgaW1hZ2VzP1xuZXhwb3J0IGNvbnN0IFVJU2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhICA9IHtcbiAgcGF0aDogJ2Fzc2V0cy9VSVNwcml0ZXMucG5nJyxcbiAgZGF0YToge1xuICAgIHR5cGU6ICdVSScsXG4gICAgc3ByaXRlczogW1xuICAgICAge1xuICAgICAgICBpZDogMCxcbiAgICAgICAgbmFtZTogJ2N1cnNvcicsXG4gICAgICAgIHg6IDQ0LFxuICAgICAgICB5OiA2LFxuICAgICAgICB3OiAyOCxcbiAgICAgICAgaDogMzEsXG4gICAgICB9XG4gICAgXVxuICB9XG59IiwiaW1wb3J0IHsgQmdSZW5kZXJlciB9IGZyb20gXCIuL2JnUmVuZGVyZXIvYmdSZW5kZXJlclwiO1xuaW1wb3J0IHsgVUlSZW5kZXJlciB9IGZyb20gJy4vVUlSZW5kZXJlci91aVJlbmRlcmVyJ1xuaW1wb3J0IHsgSU1hcCB9IGZyb20gJy4vSU1hcCdcbmltcG9ydCB7IFNwcml0ZXNoZWV0TG9hZGVyIH0gZnJvbSBcIi4vc3ByaXRlU2hlZXRMb2FkZXIvc3ByaXRlc2hlZXRMb2FkZXJcIjtcblxuLy8gcGFzcyBjb25maWcgaW50byByZW5kZXJlciBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIGhhcmQgY29kaW5nIGRlcGVuZGVuY3k/XG5pbXBvcnQgeyB0ZXJyYWluc2hlZXREYXRhIH0gZnJvbSAnLi9zcHJpdGVzaGVldHMvdGVycmFpblNoZWV0RGF0YSdcbmltcG9ydCB7IFVJU2hlZXREYXRhIH0gZnJvbSAnLi9zcHJpdGVzaGVldHMvVUlTaGVldERhdGEnXG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi4vY3Vyc29yXCI7XG5cbi8vIEN1cnJlbnRseSBVbmltcGxlbWVudGVkXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xuICBnYW1lQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgZ2FtZUNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgLy8gbWFwOiBNYXBPYmplY3Q7XG4gIGJnUmVuZGVyZXI6IEJnUmVuZGVyZXJcbiAgdWlSZW5kZXJlcjogVUlSZW5kZXJlclxuICAvLyB1bml0UmVuZGVyZXI6IFVuaXRSZW5kZXJlclxuXG4gIC8vIE1heWJlIHJlbmRlcmVyIHRha2VzIGEgbWFwIGFuZCBjdXJzb3I/IE9yIGEgZ2FtZXN0YXRlIG9iamVjdCB0aGF0XG4gIC8vICBjb250YWlucyBtYXAsIGdhbWUgYW5kIFVJIGRhdGE/XG4gIGNvbnN0cnVjdG9yKGN1cnNvcjogQ3Vyc29yKSB7XG4gICAgdGhpcy5nYW1lQ2FudmFzID0gdGhpcy5zZXR1cE1haW5DYW52YXMoKTtcbiAgICB0aGlzLmdhbWVDb250ZXh0ID0gdGhpcy5nYW1lQ2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICBTcHJpdGVzaGVldExvYWRlci5sb2FkKHRlcnJhaW5zaGVldERhdGEpXG4gICAgU3ByaXRlc2hlZXRMb2FkZXIubG9hZChVSVNoZWV0RGF0YSlcbiAgICB0aGlzLmJnUmVuZGVyZXIgPSBuZXcgQmdSZW5kZXJlcih0ZXJyYWluc2hlZXREYXRhKVxuICAgIHRoaXMudWlSZW5kZXJlciA9IG5ldyBVSVJlbmRlcmVyKGN1cnNvciwgVUlTaGVldERhdGEpXG4gICAgLy8gdGhpcy51bml0UmVuZGVyZXIgPSBuZXcgVW5pdFJlbmRlcmVyKClcbiAgICAvLyBlZmZlY3RzIHJlbmRlcmVyPyBldGMuXG4gIH1cblxuICBsb2FkTWFwKG1hcDpJTWFwKXtcbiAgICB0aGlzLmJnUmVuZGVyZXIubG9hZE1hcChtYXApXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIC8vIE1hcCwgZ2FtZXN0YXRlIGFuZCB1aSBzdGF0ZSByZXF1aXJlZFxuICAgIC8vIFBlcmhhcHMgaGF2ZSBlYWNoIG9mIHRoZXNlIG1ldGhvZHMgcmV0dXJuIGEgY2FudmFzIHdoaWNoIGNhbiB0aGVuIGJlIGRyYXduIGluIHRoZSBtYWluIHJlbmRlcmVyP1xuICAgIGNvbnNvbGUubG9nKHRoaXMpXG4gICAgY29uc3QgY2FudmFzZXMgPSB0aGlzLmdldENhbnZhc2VzKHRoaXMuYmdSZW5kZXJlcikvLywgdGhpcy51bml0UmVuZGVyZXIsIHRoaXMudWlSZW5kZXJlcilcbiAgICBjYW52YXNlcy5mb3JFYWNoKChjYW52YXMpID0+IHtcbiAgICAgIC8vIGNoYW5nZSAwLDAgdG8gdG9wTGVmdCBhZGp1c3RtZW50P1xuICAgICAgdGhpcy5nYW1lQ29udGV4dC5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHNldHVwTWFpbkNhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgY29uc3QgY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcbiAgICBjYW52YXMuaGVpZ2h0ID0gNjAwOyAvLyBzZXQgZGltZW5zaW9ucyBpbiBjb25maWc/XG4gICAgY2FudmFzLndpZHRoID0gODAwO1xuICAgIHJldHVybiBjYW52YXM7XG4gIH1cblxuICBwcml2YXRlIGdldENhbnZhc2VzKGJnUmVuZGVyZXI6QmdSZW5kZXJlcik6IEhUTUxDYW52YXNFbGVtZW50W10ge1xuICAgIC8vIFJldHVybiBhcnJheSBvcmRlcmVkIGZyb20gYmFja2dyb3VuZCB0byBmb3JlZ3JvdW5kXG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMuYmdSZW5kZXJlci5yZW5kZXIoKSwgLy8gS2VlcCBtYXAgc3RhdGljIGluc3RlYWQgb2YgcmVhZGluZyBpdCBldmVyeSB0aW1lP1xuICAgICAgLy8gdGhpcy51bml0UmVuZGVyZXIucmVuZGVyKGdhbWVTdGF0ZS51bml0cyksXG4gICAgICAvLyB0aGlzLnVpUmVuZGVyZXIucmVuZGVyKHVpU3RhdGUpLFxuICAgIF1cbiAgfVxufSIsImltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuLi9jdXJzb3JcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgY3Vyc29yOiBDdXJzb3JcblxuICAvLyBUaGlzIGFsbG93cyB1cyB0byBlYXNpbHkgY2hhbmdlIHRoZSBrZXliaW5kaW5ncyBwcm9ncmFtYXRpY2FsbHlcbiAgLy8gQ291bGQgcmV2ZXJzZSBvcmRlciwgc28gdGhhdCBhY3Rpb25zIGNhbiBiZSBsb29rZWQgdXAgdmlhIGtleWNvZGUgcmF0aGVyXG4gIC8vIFRoYW4gdGhlIG90aGVyIHdheSByb3VuZD8gQWxsb3dzIGZvciBhIGdlbmVyaWMgaGFuZGxlS2V5UHJlc3MgbWV0aG9kP1xuICBrZXlNYXBwaW5nczoge1trZXlOYW1lOiBzdHJpbmddOiBudW1iZXJ9ID0ge1xuICAgIHVwQ29kZTogODcsICAgLy8gV1xuICAgIGRvd25Db2RlOiA4MywgLy8gU1xuICAgIGxlZnRDb2RlOiA2NSwgLy8gQVxuICAgIHJpZ2h0Q29kZTogNjggLy8gRFxuICB9XG5cbiAgLy8gRXh0ZW5kIHRvIHVzZSBHYW1lT2JqZWN0IGluc3RlYWQgb2YgQ3Vyc29yIHNvIG11bHRpcGxlIHRoaW5ncyBjYW4gYmUgbW92ZWQ/XG4gIC8vIEdhbWVPYmplY3QgY291bGQgYmUgYW4gaW50ZXJmYWNlIHRoYXQgdXNlcyBhIG1vdmUgbWV0aG9kP1xuICBjb25zdHJ1Y3RvcihjdXJzb3I6IEN1cnNvcikge1xuICAgIHRoaXMuY3Vyc29yID0gY3Vyc29yO1xuICAgIHRoaXMuaGFuZGxlS2V5UHJlc3MgPSB0aGlzLmhhbmRsZUtleVByZXNzLmJpbmQodGhpcyk7XG4gICAgZG9jdW1lbnQub25rZXlwcmVzcyA9IGRvY3VtZW50Lm9ua2V5ZG93biA9IHRoaXMuaGFuZGxlS2V5UHJlc3M7XG4gIH1cblxuICAvLyBUT0RPIGV4dHJhY3Qga2V5YmluZGluZ3MgdG8gY29uZmlnIGZpbGVcbiAgaGFuZGxlS2V5UHJlc3MoZTogS2V5Ym9hcmRFdmVudCkge1xuICAgIC8vIFRoaXMgbWV0aG9kIGFsbG93cyBtdWx0aXBsZSBrZXlzIHRvIGJlIHByZXNzZWQgYXQgb25jZS5cbiAgICAvLyBTdG9yZXMgYW4gb2JqZWN0IG9mIHs8a2V5Q29kZT46IHRydWUsIDxrZXlDb2RlMj46IGZhbHNlfSBmb3IgZXhhbXBsZS5cbiAgICBjb25zdCBwcmVzc2VkS2V5czoge1trZXk6IG51bWJlcl06IGJvb2xlYW59ID0ge31cbiAgICBwcmVzc2VkS2V5c1tlLmtleUNvZGVdID0gZS50eXBlID09PSAna2V5ZG93bidcblxuICAgIGNvbnN0IHt1cENvZGUsIGRvd25Db2RlLCBsZWZ0Q29kZSwgcmlnaHRDb2RlfSA9IHRoaXMua2V5TWFwcGluZ3NcbiAgICBpZiAocHJlc3NlZEtleXNbdXBDb2RlXSkgdGhpcy5jdXJzb3IubW92ZSgndXAnKVxuICAgIGlmIChwcmVzc2VkS2V5c1tkb3duQ29kZV0pIHRoaXMuY3Vyc29yLm1vdmUoJ2Rvd24nKVxuICAgIGlmIChwcmVzc2VkS2V5c1tsZWZ0Q29kZV0pIHRoaXMuY3Vyc29yLm1vdmUoJ2xlZnQnKVxuICAgIGlmIChwcmVzc2VkS2V5c1tyaWdodENvZGVdKSB0aGlzLmN1cnNvci5tb3ZlKCdyaWdodCcpXG4gIH1cbn1cbiIsImludGVyZmFjZSBJUG9zaXRpb24ge1xuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlclxufVxuXG5leHBvcnQgY2xhc3MgQ3Vyc29yIHtcbiAgcG9zaXRpb246IElQb3NpdGlvbjtcbiAgaW1hZ2VEYXRhOiBJbWFnZURhdGE7XG5cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIC8vIFN0b3JlIGltYWdlIGRhdGEgaW4gY3Vyc29yIGNsYXNzIG9yIG9ubHkgcG9zaXRpb24gZGF0YT9cbiAgICB0aGlzLnBvc2l0aW9uID0ge3g6IDAsIHk6IDB9XG4gIH1cblxuICBzZXRQb3NpdGlvbih4Om51bWJlciwgeTpudW1iZXIpe1xuICAgIHRoaXMucG9zaXRpb24ueCA9IHhcbiAgICB0aGlzLnBvc2l0aW9uLnkgPSB5XG4gIH1cblxuICBtb3ZlKGRpcmVjdGlvbjogc3RyaW5nKXtcbiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24udG9Mb3dlckNhc2UoKVxuICAgIC8vIFVzZSBhIHN3aXRjaCBzdGF0ZW1lbnQvb2JqZWN0IGxpdGVyYWwgZm9yIHRoaXM/XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3VwJykgdGhpcy5tb3ZlVXAoKVxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdkb3duJykgdGhpcy5tb3ZlRG93bigpXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB0aGlzLm1vdmVMZWZ0KClcbiAgICBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB0aGlzLm1vdmVSaWdodCgpXG4gICAgY29uc29sZS5sb2codGhpcy5wb3NpdGlvbilcbiAgfVxuXG4gIC8vIHJlbW92ZSB0aGUgYmVsb3cgc3RhdGVtZW50cyBhbmQgb25seSB1c2UgLm1vdmUoJ2RpcmVjdGlvbicpPyBPciB2aXNhIHZlcnNhPyBNYWtlIHByaXZhdGU/XG4gIG1vdmVVcCgpe1xuICAgIHRoaXMucG9zaXRpb24ueSAtPSAxXG4gIH1cbiAgbW92ZURvd24oKXtcbiAgICB0aGlzLnBvc2l0aW9uLnkgKz0gMVxuICB9XG4gIG1vdmVMZWZ0KCl7XG4gICAgdGhpcy5wb3NpdGlvbi54IC09IDFcbiAgfVxuICBtb3ZlUmlnaHQoKXtcbiAgICB0aGlzLnBvc2l0aW9uLnggKz0gMVxuICB9XG5cbiAgZ2V0VG9wTGVmdFBpeGVsQ29vcmRpbmF0ZXMoKXtcbiAgICBjb25zdCB4ID0gdGhpcy5wb3NpdGlvbi54ICogMTYgLSAzXG4gICAgY29uc3QgeSA9IHRoaXMucG9zaXRpb24ueSAqIDE2IC0gM1xuICAgIHJldHVybiB7eCwgeX1cbiAgfVxufSIsImltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlci9yZW5kZXJlcidcbmltcG9ydCB7IElNYXAgfSBmcm9tICcuL3JlbmRlcmVyL0lNYXAnXG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXIvY29udHJvbGxlcic7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tICcuL2N1cnNvcic7XG5cbmNvbnN0IG1hcDogSU1hcCA9IHtcbiAgZGF0YTogW1xuICAgIFswLDAsMCwxLDEsMF0sXG4gICAgWzAsMCwwLDEsMSwwXSxcbiAgICBbMCwwLDEsMSwxLDBdLFxuICAgIFswLDEsMSwxLDEsMF0sXG4gICAgWzAsMCwwLDEsMSwwXSxcbiAgICBbMSwxLDAsMSwxLDFdLFxuICBdXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2luZSB7XG4gIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgY29udHJvbGxlcjogQ29udHJvbGxlcjtcbiAgY3Vyc29yOiBDdXJzb3JcblxuXG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5jdXJzb3IgPSBuZXcgQ3Vyc29yXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih0aGlzLmN1cnNvcilcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcih0aGlzLmN1cnNvcilcbiAgICB0aGlzLnJlbmRlcmVyLmxvYWRNYXAobWFwKVxuXG4gIH1cblxuICBydW4oKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpXG4gICAgfSwgMjAwMClcbiAgfVxufSIsImltcG9ydCBFbmdpbmUgZnJvbSAnLi4vZ2FtZUVuZ2luZS9lbmdpbmUnXG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBjbGFzcyBBcHAge1xuICBydW4gKCkge1xuICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBFbmdpbmUoKVxuICAgIGVuZ2luZS5ydW4oKVxuICB9XG59IiwiaW1wb3J0IGFwcCBmcm9tICcuL2FwcC9hcHAnXG5cbmFwcC5ydW4oKSJdLCJzb3VyY2VSb290IjoiIn0=