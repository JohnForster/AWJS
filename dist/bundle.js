!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var r,o,i,a,u=function(){function t(t){this.canvas=this.setupCanvas(),this.context=this.canvas.getContext("2d"),this.cachedCanvas=document.createElement("canvas"),this.sprites=t.data.sprites}return t.prototype.render=function(n){var e=this;return n?(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),n.elements.forEach(function(t){var n=e.sprites[t.id],r=16*t.x+(n.ax||0),o=16*t.y+(n.ay||0);e.context.putImageData(n.imageData,r+8,o+8)}),this.cachedCanvas=t.cloneCanvas(this.canvas),this.canvas):this.cachedCanvas},t.cloneCanvas=function(t){var n=document.createElement("canvas"),e=n.getContext("2d");return n.width=t.width,n.height=t.height,e.drawImage(t,0,0),n},t.prototype.setupCanvas=function(){var t=document.createElement("canvas");return t.height=600,t.width=800,t},t}(),c=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n}(u),f=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n}(u),h=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return h(n,t),n}(u),d=function(){function t(){}return t.getTerrainScreenObjects=function(t){var n=[];return t.terrain.mapIdGrid.forEach(function(t,e){t.forEach(function(t,r){n.push({id:t,x:r,y:e,z:0})})}),{elements:n}},t.getUnitsScreenObjects=function(t){var n=[];return t.terrain.mapIdGrid.forEach(function(t,e){t.forEach(function(t,r){n.push({id:t,x:r,y:e,z:0})})}),{elements:n}},t}(),y=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a},v=function(){function t(t,n,e){this.logicModel=t,this.uiModel=n,this.mainCanvas=this.setupMainCanvas(),this.mainContext=this.mainCanvas.getContext("2d"),this.bgRenderer=new s(e.terrain),this.uiRenderer=new p(e.ui),this.unitRenderer=new l(e.units)}return t.prototype.render=function(){var t=this.getGameState(),n=d.getTerrainScreenObjects(t),e=d.getUnitsScreenObjects(t),r=y(this.renderGame(n,e),2),o=r[0],i=r[1],a=this.getUIState(),u=this.renderUI(a);this.paintToMainCanvas(o,i,u)},t.prototype.paintToMainCanvas=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.mainContext.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height),n.forEach(function(n){t.mainContext.drawImage(n,0,0)})},t.prototype.renderGame=function(t,n){return[this.bgRenderer.render(t),this.unitRenderer.render(n)]},t.prototype.renderUI=function(t){return this.uiRenderer.render(t)},t.prototype.getGameState=function(){return this.logicModel.getState()},t.prototype.getUIState=function(){return this.uiModel.getState()},t.prototype.setupMainCanvas=function(){var t=document.getElementById("canvas");return t.height=600,t.width=800,t},t}(),m=function(){function t(t){this.keyMappings={w:"up",s:"down",a:"left",d:"right"," ":"A"},this.uiModel=t,document.onkeypress=this.handleKeyPress.bind(this)}return t.prototype.handleKeyPress=function(t){var n=this.keyMappings[t.key.toLowerCase()];n&&this.uiModel.send(n)},t}(),g=function(){function t(t,n,e){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this.instructions={up:function(){},down:function(){},left:function(){},right:function(){},A:function(){},B:function(){},L:function(){},R:function(){},start:function(){},select:function(){}},this.position={x:t,y:n,z:e},this.init(r)}return t.prototype.init=function(t){},t.prototype.sendInstruction=function(t){this.instructions[t]()},t}(),w=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),b=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.name="cursor",n.id=0,n.instructions={up:function(){n.moveUp()},down:function(){n.moveDown()},left:function(){n.moveLeft()},right:function(){n.moveRight()},A:function(){},B:function(){},L:function(){},R:function(){},start:function(){},select:function(){}},n}return w(n,t),n.prototype.moveUp=function(t){void 0===t&&(t=1),this.position.y>0&&(this.position.y-=t)},n.prototype.moveDown=function(t){void 0===t&&(t=1),this.position.y+=t},n.prototype.moveLeft=function(t){void 0===t&&(t=1),this.position.x>0&&(this.position.x-=t)},n.prototype.moveRight=function(t){void 0===t&&(t=1),this.position.x+=t},n}(g),x=function(){return(x=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},_=function(){function t(t){this.objects=[],console.log(this.currentUIState),this.gameState=t.getState(),this.cursor=this.create(b,{x:0,y:0,z:0}),this.select(this.cursor),this.refreshState()}return t.prototype.send=function(t){this.selectedObject.sendInstruction(t);var n=this.selectedObject.position;n.x,n.y;this.refreshState()},t.prototype.create=function(t,n,e){var r=new t(n.x,n.y,n.z);return e&&e(r),this.objects.push(r),r},t.prototype.refreshState=function(){var t=this;this.currentUIState.elements=[],this.objects=this.objects.sort(function(t,n){return t.position.z-n.position.z}),this.objects.forEach(function(n){var e=n.position,r=n.id;t.currentUIState.elements.push(x({id:r},e))})},t.prototype.getState=function(){return this.currentUIState},t.prototype.select=function(t){this.selectedObject=t||this.cursor},t}(),S=function(){function t(){}return t.prototype.getState=function(){},t}(),O=function(){return function(){}}(),j=function(){function t(t,n,e,r){this.loadedUnits=[],this.hidden=!1,this.type=t,this.playerId=n,this.gridPosX=e,this.gridPosY=r,this.currentHealth=t.totalHealth,this.currentFuel=t.maxFuel,this.currentAmmo=t.maxAmmo}return t.prototype.destroy=function(){this.gridPosX=this.gridPosY=this.currentAmmo=this.currentFuel=this.currentHealth=-1},t.prototype.damage=function(t){this.currentHealth-=t,this.currentHealth<0&&this.destroy()},t}();!function(t){t[t.infantary=0]="infantary",t[t.vehicle=1]="vehicle",t[t.helicopter=2]="helicopter",t[t.plane=3]="plane",t[t.ship=4]="ship",t[t.submarine=5]="submarine"}(o||(o={})),function(t){t[t.direct=0]="direct",t[t.indirect=1]="indirect"}(i||(i={})),function(t){t[t.capture=0]="capture",t[t.dive=1]="dive",t[t.load=2]="load",t[t.supply=3]="supply",t[t.unload=4]="unload",t[t.join=5]="join"}(a||(a={}));var I={id:4,name:"tank",cost:5e3,totalHealth:100,type:o.vehicle,visionRange:3,movementRange:5,maxFuel:80,maxAmmo:8,weapons:{primary:{name:"cannon",type:i.direct,baseDamage:70,efficacy:{infantary:1,vehicle:1,helicopter:1,plane:1,ship:1,submarine:1}}},abilities:[]},C=new O,P=function(){function t(){this.logicModel=new S}return t.prototype.getState=function(){return{gameID:1,numberOfPlayers:1,players:[{id:0,player:C,money:1e3,color:"orange"}],terrain:{sizeX:5,sizeY:5,mapIdGrid:[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]},units:[new j(I,0,2,2),new j(I,0,2,3),new j(I,0,4,2),new j(I,0,1,1)]}},t}(),M=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(a,u)}c((r=r.apply(t,n||[])).next())})},E=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},U=function(){function t(){}return t.load=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return M(this,void 0,void 0,function(){var e=this;return E(this,function(r){return n.forEach(function(n){return M(e,void 0,void 0,function(){var e,r,o,i;return E(this,function(a){switch(a.label){case 0:return[4,t.addImageProcess(n.path)];case 1:for(o in e=a.sent(),r=t.getContext(e),n.data.sprites)(i=n.data.sprites[o]).imageData=t.getImageData(i,r);return[2]}})})}),[2]})})},t.getContext=function(n){var e=t.setupCanvas(n).getContext("2d");return e.drawImage(n,0,0),e},t.setupCanvas=function(t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n},t.addImageProcess=function(t){return new Promise(function(n,e){var r=new Image;r.onload=function(){return n(r)},r.onerror=function(t){return e(t)},r.src=t})},t.getImageData=function(t,n){var e=t.x,r=t.y,o=t.w,i=t.h;return n.getImageData(e,r,o,i)},t}(),k={path:"assets/terrain/spriteSheet.png",data:{type:"terrain",sprites:{0:{name:"sea",x:340,y:1567,w:16,h:16},1:{name:"grass",x:217,y:1567,w:16,h:16}}}},R={path:"assets/ui/UISprites.png",data:{type:"UI",sprites:{0:{name:"cursor",x:44,y:6,w:28,h:31,ax:-3,ay:-3}}}},A={path:"assets/units/unitSprites.png",data:{type:"units",sprites:{0:{name:"infantary_orange",x:24,y:4,w:14,h:15,ax:0,ay:1},4:{name:"tank_orange",x:96,y:6,w:13,h:13,ax:2,ay:1}}}},G=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(a,u)}c((r=r.apply(t,n||[])).next())})},D=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},z=function(){function t(){this.logicModel=new P,this.uiModel=new _(this.logicModel),this.view=new v(this.logicModel,this.uiModel,{terrain:k,ui:R,units:A}),this.controller=new m(this.uiModel),this.performAsyncSetup()}return t.prototype.performAsyncSetup=function(){return G(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,Promise.all([U.load(k,R,A)])];case 1:return t.sent(),this.runGame(),[2]}})})},t.prototype.runGame=function(){var t=this;setInterval(function(){t.view.render()},1e3/30)},t}();(new(function(){function t(){}return t.prototype.run=function(){new z},t}())).run()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy9zdWJyZW5kZXJlcnMvc3VicmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvbW9kZWwvbG9naWNNb2RlbC91bml0L3VuaXREYXRhU3RydWN0dXJlLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL3ZpZXcvc3VicmVuZGVyZXJzL2JnUmVuZGVyZXIvYmdSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS92aWV3L3N1YnJlbmRlcmVycy91aVJlbmRlcmVyL3VpUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy9zdWJyZW5kZXJlcnMvdW5pdFJlbmRlcmVyLnRzL3VuaXRSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS92aWV3L2dhbWVTdGF0ZVBhcnNlci9nYW1lU3RhdGVQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL2NvbnRyb2xsZXIvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC91aU1vZGVsL3VpT2JqZWN0cy91aU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC91aU1vZGVsL3VpT2JqZWN0cy9jdXJzb3IvY3Vyc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL21vZGVsL3VpTW9kZWwvdWlNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC9sb2dpY01vZGVsL2xvZ2ljTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvbW9kZWwvbG9naWNNb2RlbC9wbGF5ZXIvcGxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL21vZGVsL2xvZ2ljTW9kZWwvdW5pdC91bml0LnRzIiwid2VicGFjazovLy8uL3NyYy9yZXNvdXJjZXMvdW5pdHMvdGFuay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC9sb2dpY01vZGVsL21lZGlhdG9yL21lZGlhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL3ZpZXcvc3VicmVuZGVyZXJzL2ltYWdlTG9hZGVyL2ltYWdlTG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvdGVycmFpbi90ZXJyYWluc2hlZXREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvdWkvdWlTaGVldERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy91bml0cy91bml0c2hlZXREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL2VuZ2luZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1bml0S2luZCIsIndlYXBvblR5cGUiLCJ1bml0QWJpbGl0eSIsIlN1YnJlbmRlcmVyIiwic3ByaXRlc2hlZXREYXRhIiwidGhpcyIsImNhbnZhcyIsInNldHVwQ2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjYWNoZWRDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcHJpdGVzIiwiZGF0YSIsInJlbmRlciIsInNjcmVlbk9iamVjdHMiLCJfdGhpcyIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZWxlbWVudHMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInNwcml0ZSIsImlkIiwieCIsImF4IiwieSIsImF5IiwicHV0SW1hZ2VEYXRhIiwiaW1hZ2VEYXRhIiwiY2xvbmVDYW52YXMiLCJvbGRDYW52YXMiLCJuZXdDYW52YXMiLCJkcmF3SW1hZ2UiLCJfc3VwZXIiLCJCZ1JlbmRlcmVyIiwiX19leHRlbmRzIiwic3VicmVuZGVyZXIiLCJVSVJlbmRlcmVyIiwidWlSZW5kZXJlcl9leHRlbmRzIiwiVW5pdFJlbmRlcmVyIiwidW5pdFJlbmRlcmVyX2V4dGVuZHMiLCJHYW1lU3RhdGVQYXJzZXIiLCJnZXRUZXJyYWluU2NyZWVuT2JqZWN0cyIsImdhbWVTdGF0ZSIsInRlcnJhaW5UaWxlcyIsInRlcnJhaW4iLCJtYXBJZEdyaWQiLCJyb3ciLCJyb3dOdW1iZXIiLCJjb2xOdW1iZXIiLCJwdXNoIiwieiIsImdldFVuaXRzU2NyZWVuT2JqZWN0cyIsInVuaXRzIiwiVmlldyIsImxvZ2ljTW9kZWwiLCJ1aU1vZGVsIiwic3ByaXRlc2hlZXRzIiwibWFpbkNhbnZhcyIsInNldHVwTWFpbkNhbnZhcyIsIm1haW5Db250ZXh0IiwiYmdSZW5kZXJlciIsInVpUmVuZGVyZXIiLCJ1aSIsInVuaXRSZW5kZXJlciIsImdldEdhbWVTdGF0ZSIsInRlcnJhaW5TY3JlZW5PYmplY3RzIiwiZ2FtZVN0YXRlUGFyc2VyIiwidW5pdHNTY3JlZW5PYmplY3RzIiwiX2EiLCJfX3JlYWQiLCJyZW5kZXJHYW1lIiwidGVycmFpbkNhbnZhcyIsInVuaXRDYW52YXMiLCJ1aVN0YXRlIiwiZ2V0VUlTdGF0ZSIsInVpQ2FudmFzIiwicmVuZGVyVUkiLCJwYWludFRvTWFpbkNhbnZhcyIsImNhbnZhc2VzIiwiX2kiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bml0U2NyZWVuT2JqZWN0cyIsImdldFN0YXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJDb250cm9sbGVyIiwia2V5TWFwcGluZ3MiLCJ3IiwiYSIsIiAiLCJvbmtleXByZXNzIiwiaGFuZGxlS2V5UHJlc3MiLCJlIiwiaW5wdXQiLCJ0b0xvd2VyQ2FzZSIsInNlbmQiLCJVSU9iamVjdCIsImFyZ3MiLCJpbnN0cnVjdGlvbnMiLCJ1cCIsImRvd24iLCJsZWZ0IiwicmlnaHQiLCJBIiwiQiIsIkwiLCJSIiwic3RhcnQiLCJzZWxlY3QiLCJwb3NpdGlvbiIsImluaXQiLCJzZW5kSW5zdHJ1Y3Rpb24iLCJpbnN0cnVjdGlvbiIsIkN1cnNvciIsImFwcGx5IiwibW92ZVVwIiwibW92ZURvd24iLCJtb3ZlTGVmdCIsIm1vdmVSaWdodCIsImN1cnNvcl9leHRlbmRzIiwidWlPYmplY3QiLCJVSU1vZGVsIiwib2JqZWN0cyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50VUlTdGF0ZSIsImN1cnNvciIsInJlZnJlc2hTdGF0ZSIsInNlbGVjdGVkT2JqZWN0IiwiVUlPYmplY3RDbGFzcyIsInNldHVwRm4iLCJzb3J0IiwiYiIsIl9fYXNzaWduIiwiTG9naWNNb2RlbCIsIlVuaXQiLCJ1bml0VHlwZSIsInBsYXllcklkIiwibG9hZGVkVW5pdHMiLCJoaWRkZW4iLCJ0eXBlIiwiZ3JpZFBvc1giLCJncmlkUG9zWSIsImN1cnJlbnRIZWFsdGgiLCJ0b3RhbEhlYWx0aCIsImN1cnJlbnRGdWVsIiwibWF4RnVlbCIsImN1cnJlbnRBbW1vIiwibWF4QW1tbyIsImRlc3Ryb3kiLCJkYW1hZ2UiLCJ1bml0c190YW5rIiwiY29zdCIsInZlaGljbGUiLCJ2aXNpb25SYW5nZSIsIm1vdmVtZW50UmFuZ2UiLCJ3ZWFwb25zIiwicHJpbWFyeSIsImRpcmVjdCIsImJhc2VEYW1hZ2UiLCJlZmZpY2FjeSIsImluZmFudGFyeSIsImhlbGljb3B0ZXIiLCJwbGFuZSIsInNoaXAiLCJzdWJtYXJpbmUiLCJhYmlsaXRpZXMiLCJteVBsYXllciIsInBsYXllciIsIk1lZGlhdG9yIiwibG9naWNNb2RlbF9sb2dpY01vZGVsIiwiZ2FtZUlEIiwibnVtYmVyT2ZQbGF5ZXJzIiwicGxheWVycyIsIm1vbmV5IiwiY29sb3IiLCJzaXplWCIsInNpemVZIiwidW5pdCIsIkltYWdlTG9hZGVyIiwibG9hZCIsInNwcml0ZXNoZWV0RGF0YUFycmF5IiwiX19hd2FpdGVyIiwiYWRkSW1hZ2VQcm9jZXNzIiwicGF0aCIsInNwcml0ZXNoZWV0Iiwic2VudCIsInRlbXBDb250ZXh0IiwiZ2V0SW1hZ2VEYXRhIiwiaW1hZ2UiLCJzcmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImltZyIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsImVyciIsImgiLCJ0ZXJyYWluX3RlcnJhaW5zaGVldERhdGEiLCIwIiwiMSIsInVpU2hlZXREYXRhIiwidW5pdHNfdW5pdHNoZWV0RGF0YSIsIjQiLCJFbmdpbmUiLCJtZWRpYXRvciIsInVpTW9kZWxfdWlNb2RlbCIsInZpZXciLCJjb250cm9sbGVyIiwicGVyZm9ybUFzeW5jU2V0dXAiLCJhbGwiLCJpbWFnZUxvYWRlciIsInJ1bkdhbWUiLCJzZXRJbnRlcnZhbCIsIkFwcCIsInJ1biIsImdhbWVFbmdpbmVfZW5naW5lIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVB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QUcsR0FDSEUsRUFBRyxFQUNIK0QsRUFBRyxHQUNIZ0gsRUFBRyxHQUNIaEwsR0FBSSxFQUNKRSxHQUFJLEdBRU5vTCxFQUFHLENBQ0QxTyxLQUFNLGNBQ05tRCxFQUFHLEdBQ0hFLEVBQUcsRUFDSCtELEVBQUcsR0FDSGdILEVBQUcsR0FDSGhMLEdBQUksRUFDSkUsR0FBSSxvekNDWFosV0FLRSxTQUFBcUwsSUFFRTdNLEtBQUtxRCxXQUFhLElBQUl5SixFQUN0QjlNLEtBQUtzRCxRQUFVLElBQUl5SixFQUFRL00sS0FBS3FELFlBRWhDckQsS0FBS2dOLEtBQU8sSUFBSUEsRUFBS2hOLEtBQUtxRCxXQUFZckQsS0FBS3NELFFBQVMsQ0FBQ1gsUUFBUzRKLEVBQWtCMUksR0FBSTZJLEVBQWF2SixNQUFPd0osSUFDeEczTSxLQUFLaU4sV0FBYSxJQUFJQSxFQUFXak4sS0FBS3NELFNBRXRDdEQsS0FBS2tOLG9CQWtCVCxPQWZRTCxFQUFBdE4sVUFBQTJOLGtCQUFOLG1HQUdFLFNBQU1wQixRQUFRcUIsSUFBSSxDQUNoQkMsRUFBWWpDLEtBQUtvQixFQUFrQkcsRUFBYUMsb0JBRGxEeEksRUFBQXNILE9BSUF6TCxLQUFLcU4sb0JBR1BSLEVBQUF0TixVQUFBOE4sUUFBQSxlQUFBek0sRUFBQVosS0FDRXNOLFlBQVksV0FDVjFNLEVBQUtvTSxLQUFLdE0sVUFDVCxJQUFPLEtBRWRtTSxFQS9CQSxJQ1ZlLGVBQUksU0FBQVUsS0FJbkIsT0FIRUEsRUFBQWhPLFVBQUFpTyxJQUFBLFdBQ2lCLElBQUlDLEdBRXZCRixFQUplLEtDQVhDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBJU3ByaXRlc2hlZXREYXRhIGZyb20gJ3NyYy9hc3NldHMvSVNwcml0ZXNoZWV0RGF0YSdcbmltcG9ydCBJU2NyZWVuT2JqZWN0cyBmcm9tICcuLi8uLi9tb2RlbC9JU2NyZWVuT2JqZWN0cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1YnJlbmRlcmVyIHtcbiAgc3ByaXRlczogSVNwcml0ZXNoZWV0RGF0YVsnZGF0YSddWydzcHJpdGVzJ107XG4gIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgY2FjaGVkQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihzcHJpdGVzaGVldERhdGE6IElTcHJpdGVzaGVldERhdGEpe1xuICAgIHRoaXMuY2FudmFzID0gdGhpcy5zZXR1cENhbnZhcygpXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgIHRoaXMuY2FjaGVkQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICB0aGlzLnNwcml0ZXMgPSBzcHJpdGVzaGVldERhdGEuZGF0YS5zcHJpdGVzXG4gIH1cblxuICByZW5kZXIoc2NyZWVuT2JqZWN0cz86IElTY3JlZW5PYmplY3RzKTogSFRNTENhbnZhc0VsZW1lbnQge1xuXG4gICAgLy8gUmV0dXJuIHRoZSBjYWNoZWQgY2FudmFzIGlmIG5vIG5ldyBzdGF0ZSBoYXMgYmVlbiBnaXZlblxuICAgIGlmICghc2NyZWVuT2JqZWN0cykgcmV0dXJuIHRoaXMuY2FjaGVkQ2FudmFzXG5cbiAgICAvLyBDbGVhciB0aGUgZXhpc3RpbmcgY2FudmFzIGNvbnRleHQgXG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KVxuXG4gICAgLy8gQ3ljbGUgdGhyb3VnaCB0aGUgc3RhdGUncyBpZEdyaWQgYW5kIHJlbmRlciBlYWNoIHNwcml0ZSB0byB0aGUgY29udGV4dFxuICAgIC8vIElzIHRoaXMgZnVuY3Rpb24gdG9vIG5lc3RlZD8gUmVmYWN0b3I/XG4gICAgLy8gaWYgKHNjcmVlbk9iamVjdHMuZ3JpZEVsZW1lbnRzKSB7XG4gICAgLy8gICBzY3JlZW5PYmplY3RzLmdyaWRFbGVtZW50cy5mb3JFYWNoKChyb3csIHJvd051bWJlcikgPT4ge1xuICAgIC8vICAgICByb3cuZm9yRWFjaCgoaWQsIGNvbE51bWJlcikgPT4ge1xuICAgIC8vICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKXtcbiAgICAvLyAgICAgICAgIGNvbnN0IHNwcml0ZSA9IHRoaXMuc3ByaXRlc1tpZF1cbiAgICAvLyAgICAgICAgIGNvbnN0IHggPSBjb2xOdW1iZXIgKiAxNiArIChzcHJpdGUuYXggfHwgMCkgLy8gVGlsZSB3aWR0aCAoZ2V0IGZyb20gd2hlcmU/KVxuICAgIC8vICAgICAgICAgY29uc3QgeSA9IHJvd051bWJlciAqIDE2ICsgKHNwcml0ZS5heSB8fCAwKVxuICAgIC8vICAgICAgICAgdGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YShzcHJpdGUuaW1hZ2VEYXRhLCB4ICsgOCwgeSArIDgpIC8vIFRPRE8gV0hZICsgOCA/P1xuICAgIC8vICAgICAgIH1cbiAgICAvLyAgICAgfSlcbiAgICAvLyAgIH0pXG4gICAgLy8gfVxuXG4gICAgc2NyZWVuT2JqZWN0cy5lbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBzcHJpdGUgPSB0aGlzLnNwcml0ZXNbZWxlbWVudC5pZF1cbiAgICAgIGNvbnN0IHggPSBlbGVtZW50LnggKiAxNiArIChzcHJpdGUuYXggfHwgMCkgLy8gVGlsZSB3aWR0aCAoZ2V0IGZyb20gd2hlcmU/KVxuICAgICAgY29uc3QgeSA9IGVsZW1lbnQueSAqIDE2ICsgKHNwcml0ZS5heSB8fCAwKVxuICAgICAgdGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YShzcHJpdGUuaW1hZ2VEYXRhLCB4ICsgOCwgeSArIDgpXG4gICAgfSlcblxuICAgIC8vIENhY2hlIHRoaXMgY2FudmFzIGZvciBmdXR1cmUgdXNlXG4gICAgdGhpcy5jYWNoZWRDYW52YXMgPSBTdWJyZW5kZXJlci5jbG9uZUNhbnZhcyh0aGlzLmNhbnZhcylcblxuICAgIHJldHVybiB0aGlzLmNhbnZhc1xuICB9XG5cbiAgc3RhdGljIGNsb25lQ2FudmFzKG9sZENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICBcbiAgICAvL2NyZWF0ZSBhIG5ldyBjYW52YXNcbiAgICB2YXIgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIC8vc2V0IGRpbWVuc2lvbnNcbiAgICBuZXdDYW52YXMud2lkdGggPSBvbGRDYW52YXMud2lkdGg7XG4gICAgbmV3Q2FudmFzLmhlaWdodCA9IG9sZENhbnZhcy5oZWlnaHQ7XG5cbiAgICAvL2FwcGx5IHRoZSBvbGQgY2FudmFzIHRvIHRoZSBuZXcgb25lXG4gICAgY29udGV4dC5kcmF3SW1hZ2Uob2xkQ2FudmFzLCAwLCAwKTtcblxuICAgIC8vcmV0dXJuIHRoZSBuZXcgY2FudmFzXG4gICAgcmV0dXJuIG5ld0NhbnZhcztcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBDYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy5oZWlnaHQgPSA2MDA7IC8vIHNldCBkaW1lbnNpb25zIGluIGNvbmZpZz9cbiAgICBjYW52YXMud2lkdGggPSA4MDA7XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxufSIsIi8vIG1vdmUgZXhwb3J0cyB0byBzZXBhcmF0ZSBmaWxlcz9cblxuZXhwb3J0IGVudW0gdW5pdEtpbmQge1xuICAnaW5mYW50YXJ5JyxcbiAgJ3ZlaGljbGUnLFxuICAnaGVsaWNvcHRlcicsXG4gICdwbGFuZScsXG4gICdzaGlwJyxcbiAgJ3N1Ym1hcmluZScsXG59XG5cbmV4cG9ydCBlbnVtIHdlYXBvblR5cGUge1xuICAnZGlyZWN0JyxcbiAgJ2luZGlyZWN0Jyxcbn1cblxuZXhwb3J0IGVudW0gdW5pdEFiaWxpdHkge1xuICAnY2FwdHVyZScsXG4gICdkaXZlJyxcbiAgJ2xvYWQnLFxuICAnc3VwcGx5JyxcbiAgJ3VubG9hZCcsXG4gICdqb2luJywgLy8gPyBEb2VzIHRoaXMgY291bnQ/IEV2ZXJ5IHVuaXQgY2FuIGpvaW4uXG59XG5cbi8vIFN0YXRpYyBwcm9wZXJ0aWVzXG5leHBvcnQgaW50ZXJmYWNlIElVbml0IHtcbiAgaWQ6IG51bWJlcixcbiAgbmFtZTogc3RyaW5nLFxuICBjb3N0OiBudW1iZXIsXG4gIHRvdGFsSGVhbHRoOiBudW1iZXIsXG4gIHR5cGU6IHVuaXRLaW5kLFxuICB2aXNpb25SYW5nZTogbnVtYmVyLFxuICBtb3ZlbWVudFJhbmdlOiBudW1iZXIsXG4gIG1heEZ1ZWw6IG51bWJlcixcbiAgbWF4QW1tbzogbnVtYmVyLFxuICB3ZWFwb25zOiB7XG4gICAgcHJpbWFyeToge1xuICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgdHlwZTogd2VhcG9uVHlwZSxcbiAgICAgIHJhbmdlPzogbnVtYmVyLFxuICAgICAgYmFzZURhbWFnZTogbnVtYmVyLFxuICAgICAgZWZmaWNhY3k6IHtcbiAgICAgICAgaW5mYW50YXJ5OiBudW1iZXIsXG4gICAgICAgIHZlaGljbGU6IG51bWJlcixcbiAgICAgICAgaGVsaWNvcHRlcjogbnVtYmVyLFxuICAgICAgICBwbGFuZTogbnVtYmVyLFxuICAgICAgICBzaGlwOiBudW1iZXIsXG4gICAgICAgIHN1Ym1hcmluZTogbnVtYmVyLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNlY29uZGFyeT86IHtcbiAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgIHR5cGU6IHdlYXBvblR5cGUsXG4gICAgICByYW5nZT86IG51bWJlcixcbiAgICAgIGJhc2VEYW1hZ2U6IG51bWJlcixcbiAgICAgIGVmZmljYWN5OiB7XG4gICAgICAgIGluZmFudGFyeTogbnVtYmVyLFxuICAgICAgICB2ZWhpY2xlOiBudW1iZXIsXG4gICAgICAgIGhlbGljb3B0ZXI6IG51bWJlcixcbiAgICAgICAgcGxhbmU6IG51bWJlcixcbiAgICAgICAgc2hpcDogbnVtYmVyLFxuICAgICAgICBzdWJtYXJpbmU6IG51bWJlcixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgY2FwYWNpdHk/OiBudW1iZXIsXG4gIGFiaWxpdGllczogdW5pdEFiaWxpdHlbXSxcbn1cbiIsImltcG9ydCBTdWJyZW5kZXJlciBmcm9tICcuLi9zdWJyZW5kZXJlcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmdSZW5kZXJlciBleHRlbmRzIFN1YnJlbmRlcmVyIHt9IC8vIEFkZCBhbnkgYmcgc3BlY2lmaWMgcmVuZGVyaW5nIiwiaW1wb3J0IFN1YnJlbmRlcmVyIGZyb20gJy4uL3N1YnJlbmRlcmVyJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSVJlbmRlcmVyIGV4dGVuZHMgU3VicmVuZGVyZXIge1xuICAvLyBSZW5kZXIgYWNjb3JkaW5nIHRvIFVJIGxheWVyPyBpZSB6LXZhbHVlXG59IC8vIEFkZCBhbnkgVUkgc3BlY2lmaWMgcmVuZGVyaW5nXG4iLCJpbXBvcnQgU3VicmVuZGVyZXIgZnJvbSAnLi4vc3VicmVuZGVyZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuaXRSZW5kZXJlciBleHRlbmRzIFN1YnJlbmRlcmVyIHt9IC8vIEFkZCBhbnkgVW5pdCBzcGVjaWZpYyByZW5kZXJpbmdcbiIsImltcG9ydCBJU2NyZWVuT2JqZWN0cyBmcm9tIFwiLi4vLi4vbW9kZWwvSVNjcmVlbk9iamVjdHNcIjtcbmltcG9ydCBJR2FtZVN0YXRlIGZyb20gXCIuLi8uLi9tb2RlbC9sb2dpY01vZGVsL0lHYW1lU3RhdGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlUGFyc2VyIHtcbiAgc3RhdGljIGdldFRlcnJhaW5TY3JlZW5PYmplY3RzIChnYW1lU3RhdGU6IElHYW1lU3RhdGUpOiBJU2NyZWVuT2JqZWN0cyB7XG4gICAgY29uc3QgdGVycmFpblRpbGVzOiB7aWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcn1bXSA9IFtdXG4gICAgZ2FtZVN0YXRlLnRlcnJhaW4ubWFwSWRHcmlkLmZvckVhY2goKHJvdywgcm93TnVtYmVyKSA9PiB7XG4gICAgICByb3cuZm9yRWFjaCgoaWQsIGNvbE51bWJlcikgPT4ge1xuICAgICAgICB0ZXJyYWluVGlsZXMucHVzaCh7aWQsIHg6IGNvbE51bWJlciwgeTogcm93TnVtYmVyLCB6OiAwfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4geyBlbGVtZW50czogdGVycmFpblRpbGVzIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRVbml0c1NjcmVlbk9iamVjdHMgKGdhbWVTdGF0ZTogSUdhbWVTdGF0ZSk6IElTY3JlZW5PYmplY3RzIHtcbiAgICBjb25zdCB1bml0czoge2lkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXJ9W10gPSBbXVxuICAgIGdhbWVTdGF0ZS50ZXJyYWluLm1hcElkR3JpZC5mb3JFYWNoKChyb3csIHJvd051bWJlcikgPT4ge1xuICAgICAgcm93LmZvckVhY2goKGlkLCBjb2xOdW1iZXIpID0+IHtcbiAgICAgICAgdW5pdHMucHVzaCh7aWQsIHg6IGNvbE51bWJlciwgeTogcm93TnVtYmVyLCB6OiAwfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4geyBlbGVtZW50czogdW5pdHMgfVxuICB9XG59IiwiaW1wb3J0IEJnUmVuZGVyZXIgZnJvbSAnLi9zdWJyZW5kZXJlcnMvYmdSZW5kZXJlci9iZ1JlbmRlcmVyJ1xuaW1wb3J0IFVJUmVuZGVyZXIgZnJvbSAnLi9zdWJyZW5kZXJlcnMvdWlSZW5kZXJlci91aVJlbmRlcmVyJztcbmltcG9ydCBVSU1vZGVsIGZyb20gJy4uL21vZGVsL3VpTW9kZWwvdWlNb2RlbCc7XG5pbXBvcnQgTG9naWNNb2RlbCBmcm9tICcuLi9tb2RlbC9sb2dpY01vZGVsL2xvZ2ljTW9kZWwnO1xuaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnLi4vLi4vYXNzZXRzL0lTcHJpdGVzaGVldERhdGEnO1xuaW1wb3J0IFVuaXRSZW5kZXJlciBmcm9tICcuL3N1YnJlbmRlcmVycy91bml0UmVuZGVyZXIudHMvdW5pdFJlbmRlcmVyJztcbmltcG9ydCBHYW1lU3RhdGVQYXJzZXIgZnJvbSAnLi9nYW1lU3RhdGVQYXJzZXIvZ2FtZVN0YXRlUGFyc2VyJztcbmltcG9ydCBJU2NyZWVuT2JqZWN0cyBmcm9tICcuLi9tb2RlbC9JU2NyZWVuT2JqZWN0cyc7XG4vLyBpbXBvcnQgVW5pdFJlbmRlcmVyIGZyb20gJy4vc3VicmVuZGVyZXJzL3VuaXRSZW5kZXJlci50cy91bml0UmVuZGVyZXInO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICBiZ1JlbmRlcmVyOiBCZ1JlbmRlcmVyO1xuICB1aVJlbmRlcmVyOiBVSVJlbmRlcmVyO1xuICB1bml0UmVuZGVyZXI6IGFueTtcbiAgdWlNb2RlbDogVUlNb2RlbDtcbiAgbG9naWNNb2RlbDogTG9naWNNb2RlbDtcbiAgbWFpbkNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIG1haW5Db250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgY29uc3RydWN0b3IobG9naWNNb2RlbDogTG9naWNNb2RlbCwgdWlNb2RlbDpVSU1vZGVsLCBzcHJpdGVzaGVldHM6e1trZXk6c3RyaW5nXTpJU3ByaXRlc2hlZXREYXRhfSkge1xuICAgIHRoaXMubG9naWNNb2RlbCA9IGxvZ2ljTW9kZWxcbiAgICB0aGlzLnVpTW9kZWwgPSB1aU1vZGVsXG5cbiAgICB0aGlzLm1haW5DYW52YXMgPSB0aGlzLnNldHVwTWFpbkNhbnZhcygpXG4gICAgdGhpcy5tYWluQ29udGV4dCA9IHRoaXMubWFpbkNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cbiAgICB0aGlzLmJnUmVuZGVyZXIgPSBuZXcgQmdSZW5kZXJlcihzcHJpdGVzaGVldHMudGVycmFpbilcbiAgICB0aGlzLnVpUmVuZGVyZXIgPSBuZXcgVUlSZW5kZXJlcihzcHJpdGVzaGVldHMudWkpXG4gICAgdGhpcy51bml0UmVuZGVyZXIgPSBuZXcgVW5pdFJlbmRlcmVyKHNwcml0ZXNoZWV0cy51bml0cylcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgLy8gUXVlc3Rpb24gLSB0aGUgdmFyaWFibGVzIGRlZmluZWQgaGVyZSBhcmUgcHVyZWx5IGZvciByZWFkYWJpbGl0eSxcbiAgICAvLyAgd291bGQgaXQgYmUgYmV0dGVyIHRvIHVzZSBhIGZ1bmN0aW9uYWwgc3R5bGUgaGVyZT9cbiAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLmdldEdhbWVTdGF0ZSgpXG4gICAgY29uc3QgdGVycmFpblNjcmVlbk9iamVjdHMgPSBHYW1lU3RhdGVQYXJzZXIuZ2V0VGVycmFpblNjcmVlbk9iamVjdHMoZ2FtZVN0YXRlKVxuICAgIGNvbnN0IHVuaXRzU2NyZWVuT2JqZWN0cyA9IEdhbWVTdGF0ZVBhcnNlci5nZXRVbml0c1NjcmVlbk9iamVjdHMoZ2FtZVN0YXRlKVxuICAgIGNvbnN0IFt0ZXJyYWluQ2FudmFzLCB1bml0Q2FudmFzXSA9IHRoaXMucmVuZGVyR2FtZSh0ZXJyYWluU2NyZWVuT2JqZWN0cywgdW5pdHNTY3JlZW5PYmplY3RzKVxuXG4gICAgY29uc3QgdWlTdGF0ZSA9IHRoaXMuZ2V0VUlTdGF0ZSgpXG5cbiAgICAvLyBVbmNvbW1lbnQgd2hlbiBVSSBpcyByZWFkeSB0byBiZSByZW5kZXJlZFxuICAgIGNvbnN0IHVpQ2FudmFzID0gdGhpcy5yZW5kZXJVSSh1aVN0YXRlKVxuICAgIHRoaXMucGFpbnRUb01haW5DYW52YXModGVycmFpbkNhbnZhcywgdW5pdENhbnZhcywgdWlDYW52YXMpXG4gICAgLy8gdGhpcy5wYWludFRvTWFpbkNhbnZhcyhnYW1lQ2FudmFzKVxuICB9XG5cbiAgcHJpdmF0ZSBwYWludFRvTWFpbkNhbnZhcyguLi5jYW52YXNlczogSFRNTENhbnZhc0VsZW1lbnRbXSl7XG4gICAgdGhpcy5tYWluQ29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5tYWluQ2FudmFzLndpZHRoLCB0aGlzLm1haW5DYW52YXMuaGVpZ2h0KVxuICAgIGNhbnZhc2VzLmZvckVhY2goKGNhbnZhcykgPT4ge1xuICAgICAgLy8gVE9ETyBJZiB5b3UgYXJlIHdvbmRlcmluZyB3aHkgdGhlIGVsZW1lbnRzIGFyZSBvZmYtbGluZSwgc2VlIHRvZG8gaW4gU3VicmVuZGVyZXIucmVuZGVyXG4gICAgICB0aGlzLm1haW5Db250ZXh0LmRyYXdJbWFnZShjYW52YXMsIDAsIDApXG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyR2FtZSh0ZXJyYWluU2NyZWVuT2JqZWN0czpJU2NyZWVuT2JqZWN0cywgdW5pdFNjcmVlbk9iamVjdHM6IElTY3JlZW5PYmplY3RzKTogSFRNTENhbnZhc0VsZW1lbnRbXXtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5iZ1JlbmRlcmVyLnJlbmRlcih0ZXJyYWluU2NyZWVuT2JqZWN0cyksXG4gICAgICB0aGlzLnVuaXRSZW5kZXJlci5yZW5kZXIodW5pdFNjcmVlbk9iamVjdHMpXG4gICAgXVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJVSSh1aVN0YXRlOiBJU2NyZWVuT2JqZWN0cyk6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy51aVJlbmRlcmVyLnJlbmRlcih1aVN0YXRlKVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRHYW1lU3RhdGUoKXtcbiAgICByZXR1cm4gdGhpcy5sb2dpY01vZGVsLmdldFN0YXRlKClcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VUlTdGF0ZSgpe1xuICAgIHJldHVybiB0aGlzLnVpTW9kZWwuZ2V0U3RhdGUoKVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cE1haW5DYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQge1xuICAgIGNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XG4gICAgY2FudmFzLmhlaWdodCA9IDYwMDsgLy8gc2V0IGRpbWVuc2lvbnMgaW4gY29uZmlnP1xuICAgIGNhbnZhcy53aWR0aCA9IDgwMDtcbiAgICByZXR1cm4gY2FudmFzO1xuICB9XG59IiwiaW1wb3J0IFVJTW9kZWwgZnJvbSBcIi4uL21vZGVsL3VpTW9kZWwvdWlNb2RlbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgdWlNb2RlbDogVUlNb2RlbDtcblxuICBrZXlNYXBwaW5nczoge1trZXluYW1lOiBzdHJpbmddOiBzdHJpbmd9ID0ge1xuICAgIHc6ICd1cCcsIC8vIHdcbiAgICBzOiAnZG93bicsIC8vIHNcbiAgICBhOiAnbGVmdCcsIC8vIGFcbiAgICBkOiAncmlnaHQnLCAvLyBkXG4gICAgJyAnOiAnQScsIC8vIHNwYWNlXG4gIH1cblxuICBjb25zdHJ1Y3Rvcih1aU1vZGVsOiBVSU1vZGVsKXtcbiAgICB0aGlzLnVpTW9kZWwgPSB1aU1vZGVsXG4gICAgZG9jdW1lbnQub25rZXlwcmVzcyA9IHRoaXMuaGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlS2V5UHJlc3MoZTogS2V5Ym9hcmRFdmVudCl7XG4gICAgLy8gVGhpbmsgb2YgYSBzb2x1dGlvbiB0byBkZWFsIHdpdGggbXVsdGlwbGUga2V5IHByZXNzZXM/IChFZy4gaG9sZGluZyBCIHRvIHNlZSB0aGUgcmFuZ2VcbiAgICAvLyAgb2YgdGhlIHVuaXQsIGFuZCB1c2luZyB0aGUgYXJyb3cga2V5cyB0byBuYXZpZ2F0ZSBhcm91bmQgdGhlIG1hcD8pXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzLmtleU1hcHBpbmdzW2Uua2V5LnRvTG93ZXJDYXNlKCldXG4gICAgaWYoaW5wdXQpe1xuICAgICAgdGhpcy51aU1vZGVsLnNlbmQoaW5wdXQpXG4gICAgfVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgVUlPYmplY3Qge1xuICBwb3NpdGlvbjoge1xuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgejogbnVtYmVyLFxuICB9XG4gIG5hbWU6c3RyaW5nXG4gIGlkOiBudW1iZXJcblxuICBpbnN0cnVjdGlvbnM6IHtba2V5OnN0cmluZ106IEZ1bmN0aW9ufSA9IHtcbiAgICB1cDogKCkgPT4ge30sXG4gICAgZG93bjogKCkgPT4ge30sXG4gICAgbGVmdDogKCkgPT4ge30sXG4gICAgcmlnaHQ6ICgpID0+IHt9LFxuICAgIEE6ICgpID0+IHt9LFxuICAgIEI6ICgpID0+IHt9LFxuICAgIEw6ICgpID0+IHt9LFxuICAgIFI6ICgpID0+IHt9LFxuICAgIHN0YXJ0OiAoKSA9PiB7fSxcbiAgICBzZWxlY3Q6ICgpID0+IHt9LFxuICB9XG5cbiAgY29uc3RydWN0b3IoeDpudW1iZXIsIHk6bnVtYmVyLCB6Om51bWJlciwgLi4uYXJnczphbnkpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0ge3g6IHgsIHk6IHksIHo6IHp9XG4gICAgdGhpcy5pbml0KGFyZ3MpXG4gIH1cblxuICBpbml0KGFyZ3M6IGFueVtdKTogdm9pZCB7fTtcblxuICBzZW5kSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb246c3RyaW5nKSB7XG4gICAgdGhpcy5pbnN0cnVjdGlvbnNbaW5zdHJ1Y3Rpb25dKClcbiAgfVxufSIsImltcG9ydCBVSU9iamVjdCBmcm9tIFwiLi4vdWlPYmplY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3Vyc29yIGV4dGVuZHMgVUlPYmplY3Qge1xuICAvLyBoYXZlIGEgbGF5ZXIgKHotdmFsdWUpIGFzc29jaWF0ZWQgd2l0aCB1aU9iamVjdHMgYW5kIHJlbmRlciB0aGVtIGluIG9yZGVyP1xuICBuYW1lOiBzdHJpbmcgPSAnY3Vyc29yJ1xuICBpZDogbnVtYmVyID0gMFxuICBpbnN0cnVjdGlvbnM6IHtba2V5OnN0cmluZ106IEZ1bmN0aW9ufSA9IHtcbiAgICB1cDogKCkgPT4geyB0aGlzLm1vdmVVcCgpIH0sXG4gICAgZG93bjogKCkgPT4geyB0aGlzLm1vdmVEb3duKCkgfSxcbiAgICBsZWZ0OiAoKSA9PiB7IHRoaXMubW92ZUxlZnQoKSB9LFxuICAgIHJpZ2h0OiAoKSA9PiB7IHRoaXMubW92ZVJpZ2h0KCkgfSxcbiAgICBBOiAoKSA9PiB7fSxcbiAgICBCOiAoKSA9PiB7fSxcbiAgICBMOiAoKSA9PiB7fSxcbiAgICBSOiAoKSA9PiB7fSxcbiAgICBzdGFydDogKCkgPT4ge30sXG4gICAgc2VsZWN0OiAoKSA9PiB7fSxcbiAgfVxuXG4gIG1vdmVVcChuOm51bWJlciA9IDEpe1xuICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgPiAwKSB0aGlzLnBvc2l0aW9uLnkgLT0gblxuICB9XG4gIG1vdmVEb3duKG46bnVtYmVyID0gMSl7XG4gICAgdGhpcy5wb3NpdGlvbi55ICs9IG5cbiAgfVxuICBtb3ZlTGVmdChuOm51bWJlciA9IDEpe1xuICAgIGlmICh0aGlzLnBvc2l0aW9uLnggPiAwKSB0aGlzLnBvc2l0aW9uLnggLT0gblxuICB9XG4gIG1vdmVSaWdodChuOm51bWJlciA9IDEpe1xuICAgIHRoaXMucG9zaXRpb24ueCArPSBuXG4gIH1cbn0iLCJpbXBvcnQgTG9naWNNb2RlbCBmcm9tIFwiLi4vbG9naWNNb2RlbC9sb2dpY01vZGVsXCI7XG5pbXBvcnQgVUlPYmplY3QgZnJvbSBcIi4vdWlPYmplY3RzL3VpT2JqZWN0XCI7XG5pbXBvcnQgQ3Vyc29yIGZyb20gXCIuL3VpT2JqZWN0cy9jdXJzb3IvY3Vyc29yXCI7XG5pbXBvcnQgSVNjcmVlbk9iamVjdHMgZnJvbSBcIi4uL0lTY3JlZW5PYmplY3RzXCI7XG5pbXBvcnQgSUdhbWVTdGF0ZSBmcm9tIFwiLi4vbG9naWNNb2RlbC9JR2FtZVN0YXRlXCI7XG5cbi8vIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIG1hbmlwdWxhdGluZyB0aGUgVUkgc3RhdGUuIE1vdmluZyBjdXJzb3IgYXJvdW5kLFxuLy8gIHNlbGVjdGluZyB1bml0cywgY2hlY2tpbmcgdW5pdHMgZXRjLlxuXG4vLyBUaGlzIGNvZGUgaXMgYmFkLlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVUlNb2RlbHtcbiAgLy8gVE9ETyBXaGVyZSBkbyB3ZSBnZXQgdGhlIGdyaWQgc2l6ZSBmcm9tP1xuICBjdXJyZW50VUlTdGF0ZTogSVNjcmVlbk9iamVjdHNcbiAgZ2FtZVN0YXRlOiBJR2FtZVN0YXRlXG4gIHNlbGVjdGVkT2JqZWN0OiBVSU9iamVjdFxuICBvYmplY3RzOiBVSU9iamVjdFtdID0gW11cbiAgY3Vyc29yOiBVSU9iamVjdFxuXG4gIGNvbnN0cnVjdG9yIChsb2dpY01vZGVsOkxvZ2ljTW9kZWwpe1xuICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFVJU3RhdGUpXG4gICAgdGhpcy5nYW1lU3RhdGUgPSBsb2dpY01vZGVsLmdldFN0YXRlKClcbiAgICB0aGlzLmN1cnNvciA9IHRoaXMuY3JlYXRlKEN1cnNvciwge3g6IDAsIHk6IDAsIHo6IDB9KVxuICAgIHRoaXMuc2VsZWN0KHRoaXMuY3Vyc29yKVxuICAgIHRoaXMucmVmcmVzaFN0YXRlKClcbiAgfVxuXG4gIHNlbmQgKGluc3RydWN0aW9uOnN0cmluZyl7XG4gICAgdGhpcy5zZWxlY3RlZE9iamVjdC5zZW5kSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pXG4gICAgY29uc3Qge3gsIHl9ID0gdGhpcy5zZWxlY3RlZE9iamVjdC5wb3NpdGlvblxuICAgIHRoaXMucmVmcmVzaFN0YXRlKClcbiAgICAvLyBXaHkgd291bGQgd2UgY2hhbmdlIGdyaWRFbGVtZW50cyB3aGlsZSBzZW5kaW5nIGFuIGVsZW1lbnQgYW4gaW5zdHJ1Y3Rpb24/XG4gICAgLy8gdGhpcy5jdXJyZW50VUlTdGF0ZS5ncmlkRWxlbWVudHNbeV1beF0gPSB0aGlzLnNlbGVjdGVkT2JqZWN0LmlkIC8vIEF3ZnVsIGNvZGVcbiAgfVxuXG4gIGNyZWF0ZSA8VCBleHRlbmRzIFVJT2JqZWN0PiAoVUlPYmplY3RDbGFzczogeyBuZXcoeDpudW1iZXIsIHk6bnVtYmVyLCB6Om51bWJlciwgLi4uYXJnczphbnkpOiBUIH0sIGFyZ3M6IHsgeDogbnVtYmVyLCB5Om51bWJlciwgejpudW1iZXIgfSwgc2V0dXBGbj86IEZ1bmN0aW9uKXtcbiAgICBjb25zdCB7eCwgeSwgen0gPSBhcmdzXG4gICAgY29uc3Qgb2JqZWN0ID0gbmV3IFVJT2JqZWN0Q2xhc3MoeCwgeSwgeilcbiAgICBpZiAoc2V0dXBGbikgc2V0dXBGbihvYmplY3QpIC8vIFByb2JhYmx5IGEgYmV0dGVyIHdheSBvZiBkb2luZyB0aGlzXG4gICAgdGhpcy5vYmplY3RzLnB1c2gob2JqZWN0KVxuICAgIHJldHVybiBvYmplY3RcbiAgfVxuXG4gIHJlZnJlc2hTdGF0ZSAoKSB7XG4gICAgLy8gVXNlcyBncmlkXG4gICAgdGhpcy5jdXJyZW50VUlTdGF0ZS5lbGVtZW50cyA9IFtdXG5cbiAgICB0aGlzLm9iamVjdHMgPSB0aGlzLm9iamVjdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEucG9zaXRpb24ueiAtIGIucG9zaXRpb24uelxuICAgIH0pXG5cbiAgICB0aGlzLm9iamVjdHMuZm9yRWFjaCgoe3Bvc2l0aW9uLCBpZH0pID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFVJU3RhdGUuZWxlbWVudHMucHVzaCh7aWQsIC4uLnBvc2l0aW9ufSlcbiAgICB9KVxuICAgIFxuICAgIHJldHVyblxuICAgIC8qXG4gICAgLy8gUmVtb3ZlIHRoaXMgb25jZSBpdCBpcyBubyBsb25nZXIgcmVsZXZhbnRcbiAgICAvLyBDb252ZXJ0cyBvYmplY3RzIGludG8gYSBncmlkXG4gICAgdGhpcy5vYmplY3RzLmZvckVhY2goKHVpT2JqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7IHgsIHkgfSA9IHVpT2JqZWN0LnBvc2l0aW9uXG4gICAgICAvLyBDaGVjayBpZiBhdCBpbnRlZ2VyIHBvc2l0aW9uLCBhbmQgcmVuZGVyIHRvIHN0YXRlIGRpZmZlcmVudGx5PyAoU2VlIElTdGF0ZSBpbnRlcmZhY2UpXG4gICAgICB0aGlzLmN1cnJlbnRVSVN0YXRlLmdyaWRFbGVtZW50c1t5XVt4XSA9IHVpT2JqZWN0LmlkXG4gICAgfSlcbiAgICAqL1xuICB9XG5cbiAgZ2V0U3RhdGUgKCk6SVNjcmVlbk9iamVjdHMge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVSVN0YXRlXG4gIH1cblxuICBzZWxlY3QgPFQgZXh0ZW5kcyBVSU9iamVjdD4odWlPYmplY3Q/OiBUKSB7XG4gICAgdGhpcy5zZWxlY3RlZE9iamVjdCA9IHVpT2JqZWN0ID8gdWlPYmplY3QgOiB0aGlzLmN1cnNvclxuICB9XG59IiwiaW1wb3J0IElHYW1lU3RhdGUgZnJvbSBcIi4vSUdhbWVTdGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpY01vZGVse1xuICBnZXRTdGF0ZSgpOklHYW1lU3RhdGV7cmV0dXJufVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7fSIsImltcG9ydCB7IElVbml0IH0gZnJvbSBcIi4vdW5pdERhdGFTdHJ1Y3R1cmVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5pdCB7XG4gIGlkOiBudW1iZXJcbiAgcGxheWVySWQ6IG51bWJlclxuICB0eXBlOiBJVW5pdFxuICBncmlkUG9zWDogbnVtYmVyXG4gIGdyaWRQb3NZOiBudW1iZXJcbiAgY3VycmVudEhlYWx0aDogbnVtYmVyXG4gIGN1cnJlbnRGdWVsOiBudW1iZXJcbiAgY3VycmVudEFtbW86IG51bWJlclxuICBsb2FkZWRVbml0czogVW5pdFtdID0gW11cbiAgaGlkZGVuOiBib29sZWFuID0gZmFsc2VcblxuICBjb25zdHJ1Y3Rvcih1bml0VHlwZTogSVVuaXQsIHBsYXllcklkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKXtcbiAgICAvLyB0aGlzLmlkID0gc29tZVN0YXRpY0lER2VuZXJhdGlvbk1ldGhvZCgpXG4gICAgdGhpcy50eXBlID0gdW5pdFR5cGVcbiAgICB0aGlzLnBsYXllcklkID0gcGxheWVySWRcbiAgICB0aGlzLmdyaWRQb3NYID0geFxuICAgIHRoaXMuZ3JpZFBvc1kgPSB5XG5cbiAgICB0aGlzLmN1cnJlbnRIZWFsdGggPSB1bml0VHlwZS50b3RhbEhlYWx0aFxuICAgIHRoaXMuY3VycmVudEZ1ZWwgPSB1bml0VHlwZS5tYXhGdWVsXG4gICAgdGhpcy5jdXJyZW50QW1tbyA9IHVuaXRUeXBlLm1heEFtbW9cbiAgfVxuICBcbiAgLy8gT3Igc29tZSBtZXRob2QgbGlrZSB0aGlzP1xuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLmdyaWRQb3NYID0gdGhpcy5ncmlkUG9zWSA9IHRoaXMuY3VycmVudEFtbW8gPSBcbiAgICB0aGlzLmN1cnJlbnRGdWVsID0gdGhpcy5jdXJyZW50SGVhbHRoID0gLTFcbiAgfVxuXG4gIGRhbWFnZSAobjogbnVtYmVyKSB7XG4gICAgdGhpcy5jdXJyZW50SGVhbHRoIC09IG5cbiAgICBpZiAodGhpcy5jdXJyZW50SGVhbHRoIDwgMCkgdGhpcy5kZXN0cm95KClcbiAgfVxufSIsImltcG9ydCB7IElVbml0LCB1bml0S2luZCwgd2VhcG9uVHlwZSB9IGZyb20gXCIuLi8uLi9nYW1lRW5naW5lL21vZGVsL2xvZ2ljTW9kZWwvdW5pdC91bml0RGF0YVN0cnVjdHVyZVwiO1xuXG5jb25zdCB0YW5rOiBJVW5pdCA9IHtcbiAgaWQ6IDQsXG4gIG5hbWU6ICd0YW5rJyxcbiAgY29zdDogNTAwMCxcbiAgdG90YWxIZWFsdGg6IDEwMCxcbiAgdHlwZTogdW5pdEtpbmQudmVoaWNsZSxcbiAgdmlzaW9uUmFuZ2U6IDMsXG4gIG1vdmVtZW50UmFuZ2U6IDUsXG4gIG1heEZ1ZWw6IDgwLFxuICBtYXhBbW1vOiA4LFxuICB3ZWFwb25zOiB7XG4gICAgcHJpbWFyeToge1xuICAgICAgbmFtZTogJ2Nhbm5vbicsXG4gICAgICB0eXBlOiB3ZWFwb25UeXBlLmRpcmVjdCxcbiAgICAgIGJhc2VEYW1hZ2U6IDcwLFxuICAgICAgZWZmaWNhY3k6IHtcbiAgICAgICAgaW5mYW50YXJ5OiAxLFxuICAgICAgICB2ZWhpY2xlOiAxLFxuICAgICAgICBoZWxpY29wdGVyOiAxLFxuICAgICAgICBwbGFuZTogMSxcbiAgICAgICAgc2hpcDogMSxcbiAgICAgICAgc3VibWFyaW5lOiAxLFxuICAgICAgfSxcbiAgICB9LFxuICAgIC8vIE1hY2hpbmUgZ3VuIGdvZXMgaGVyZVxuICAgIC8vIHNlY29uZGFyeT86IHtcbiAgICAvLyAgIG5hbWU6IHN0cmluZyxcbiAgICAvLyAgIHR5cGU6IHdlYXBvblR5cGUsXG4gICAgLy8gICByYW5nZT86IG51bWJlcixcbiAgICAvLyAgIGJhc2VEYW1hZ2U6IG51bWJlcixcbiAgICAvLyAgIGVmZmljYWN5OiB7XG4gICAgLy8gICAgIGluZmFudGFyeTogbnVtYmVyLFxuICAgIC8vICAgICB2ZWhpY2xlOiBudW1iZXIsXG4gICAgLy8gICAgIGhlbGljb3B0ZXI6IG51bWJlcixcbiAgICAvLyAgICAgcGxhbmU6IG51bWJlcixcbiAgICAvLyAgICAgc2hpcDogbnVtYmVyLFxuICAgIC8vICAgICBzdWJtYXJpbmU6IG51bWJlcixcbiAgICAvLyAgIH0sXG4gICAgLy8gfSxcbiAgfSxcbiAgYWJpbGl0aWVzOiBbXSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgdGFuayIsImltcG9ydCBMb2dpY01vZGVsIGZyb20gJy4uL2xvZ2ljTW9kZWwnXG5pbXBvcnQgSUdhbWVTdGF0ZSBmcm9tICcuLi9JR2FtZVN0YXRlJztcblxuaW1wb3J0IFBsYXllciBmcm9tICcuLi9wbGF5ZXIvcGxheWVyJztcbmltcG9ydCBVbml0IGZyb20gJy4uL3VuaXQvdW5pdCc7XG5pbXBvcnQgdGFuayBmcm9tICcuLi8uLi8uLi8uLi9yZXNvdXJjZXMvdW5pdHMvdGFuayc7XG5cbmNvbnN0IG15UGxheWVyID0gbmV3IFBsYXllcigpXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhdG9yIGltcGxlbWVudHMgTG9naWNNb2RlbCB7XG4gIGxvZ2ljTW9kZWw6IExvZ2ljTW9kZWw7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5sb2dpY01vZGVsID0gbmV3IExvZ2ljTW9kZWxcblxuICB9XG4gIGdldFN0YXRlKCk6IElHYW1lU3RhdGUge1xuICAgIHJldHVybiB7XG4gICAgICBnYW1lSUQ6IDEsXG4gICAgICBudW1iZXJPZlBsYXllcnM6IDEsXG4gICAgICBwbGF5ZXJzOiBbe1xuICAgICAgICBpZDogMCxcbiAgICAgICAgcGxheWVyOiBteVBsYXllciwgLy8gY2xhc3NcbiAgICAgICAgbW9uZXk6IDEwMDAsXG4gICAgICAgIGNvbG9yOiAnb3JhbmdlJywgLy8gZW51bVxuICAgICAgfV0sXG4gICAgICB0ZXJyYWluOiB7XG4gICAgICAgIHNpemVYOiA1LCAvLyBtaWdodCBiZSB1bm5lY2Vzc2FyeSBhcyBjYW4gYmUgZ290IGZyb20gbWFwSWRHcmlkWzBdLmxlbmd0aFxuICAgICAgICBzaXplWTogNSxcbiAgICAgICAgbWFwSWRHcmlkOiBbXG4gICAgICAgICAgWzAsMCwxLDAsMF0sXG4gICAgICAgICAgWzAsMSwxLDEsMF0sXG4gICAgICAgICAgWzEsMSwxLDEsMV0sXG4gICAgICAgICAgWzAsMSwxLDEsMF0sXG4gICAgICAgICAgWzAsMCwxLDAsMF0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgdW5pdHM6IFtcbiAgICAgICAgbmV3IFVuaXQodGFuaywgMCwgMiwgMiksIFxuICAgICAgICBuZXcgVW5pdCh0YW5rLCAwLCAyLCAzKSwgXG4gICAgICAgIG5ldyBVbml0KHRhbmssIDAsIDQsIDIpLFxuICAgICAgICBuZXcgVW5pdCh0YW5rLCAwLCAxLCAxKSxcbiAgICAgIF1cbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgSVNwcml0ZXNoZWV0RGF0YSBmcm9tICdzcmMvYXNzZXRzL0lTcHJpdGVzaGVldERhdGEnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlTG9hZGVyIHtcbiAgc3RhdGljIGFzeW5jIGxvYWQoLi4uc3ByaXRlc2hlZXREYXRhQXJyYXk6IElTcHJpdGVzaGVldERhdGFbXSkge1xuICAgIHNwcml0ZXNoZWV0RGF0YUFycmF5LmZvckVhY2goYXN5bmMgKHNwcml0ZXNoZWV0RGF0YSkgPT4ge1xuICAgICAgY29uc3Qgc3ByaXRlc2hlZXQgPSA8SFRNTEltYWdlRWxlbWVudD4gYXdhaXQgSW1hZ2VMb2FkZXIuYWRkSW1hZ2VQcm9jZXNzKHNwcml0ZXNoZWV0RGF0YS5wYXRoKVxuICAgICAgY29uc3QgdGVtcENvbnRleHQgPSBJbWFnZUxvYWRlci5nZXRDb250ZXh0KHNwcml0ZXNoZWV0KVxuICAgICAgZm9yIChsZXQgaWQgaW4gc3ByaXRlc2hlZXREYXRhLmRhdGEuc3ByaXRlcykge1xuICAgICAgICBsZXQgc3ByaXRlID0gc3ByaXRlc2hlZXREYXRhLmRhdGEuc3ByaXRlc1tpZF1cbiAgICAgICAgc3ByaXRlLmltYWdlRGF0YSA9IEltYWdlTG9hZGVyLmdldEltYWdlRGF0YShzcHJpdGUsIHRlbXBDb250ZXh0KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0Q29udGV4dChpbWFnZTogSFRNTEltYWdlRWxlbWVudCl7XG4gICAgY29uc3QgY2FudmFzID0gSW1hZ2VMb2FkZXIuc2V0dXBDYW52YXMoaW1hZ2UpXG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKVxuICAgIHJldHVybiBjb250ZXh0XG4gIH1cblxuICBzdGF0aWMgc2V0dXBDYW52YXMoaW1hZ2U6SFRNTEltYWdlRWxlbWVudCkge1xuICAgIGNvbnN0IGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICByZXR1cm4gY2FudmFzXG4gIH1cblxuICBzdGF0aWMgYWRkSW1hZ2VQcm9jZXNzKHNyYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGltZzpIVE1MSW1hZ2VFbGVtZW50ID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZShpbWcpO1xuICAgICAgaW1nLm9uZXJyb3IgPSAoZXJyKSA9PiByZWplY3QoZXJyKTtcbiAgICAgIGltZy5zcmMgPSBzcmM7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW1hZ2VEYXRhIChzcHJpdGU6IElTcHJpdGVzaGVldERhdGFbJ2RhdGEnXVsnc3ByaXRlcyddWzBdLCBjb250ZXh0OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6SW1hZ2VEYXRhIHtcbiAgICBjb25zdCB7eCwgeSwgdywgaH0gPSBzcHJpdGVcbiAgICByZXR1cm4gY29udGV4dC5nZXRJbWFnZURhdGEoeCwgeSwgdywgaClcbiAgfVxufSIsImltcG9ydCBJU3ByaXRlc2hlZXREYXRhIGZyb20gJy4uL0lTcHJpdGVzaGVldERhdGEnXG5cbmNvbnN0IHRlcnJhaW5zaGVldERhdGE6IElTcHJpdGVzaGVldERhdGEgPSB7XG4gIHBhdGg6ICdhc3NldHMvdGVycmFpbi9zcHJpdGVTaGVldC5wbmcnLFxuICBkYXRhOiB7XG4gICAgdHlwZTogJ3RlcnJhaW4nLFxuICAgIHNwcml0ZXM6IHtcbiAgICAgIDA6IHtcbiAgICAgICAgbmFtZTogJ3NlYScsXG4gICAgICAgIHg6IDM0MCxcbiAgICAgICAgeTogMTU2NyxcbiAgICAgICAgdzogMTYsXG4gICAgICAgIGg6IDE2XG4gICAgICB9LFxuICAgICAgMToge1xuICAgICAgICBuYW1lOiAnZ3Jhc3MnLFxuICAgICAgICB4OiAyMTcsIFxuICAgICAgICB5OiAxNTY3LCBcbiAgICAgICAgdzogMTYsIFxuICAgICAgICBoOiAxNiwgXG4gICAgICB9LFxuICAgICAgLy8gZXRjLiBldGMuXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRlcnJhaW5zaGVldERhdGEiLCJpbXBvcnQgSVNwcml0ZXNoZWV0RGF0YSBmcm9tICcuLi9JU3ByaXRlc2hlZXREYXRhJ1xuLy8gU3RvcmUgdGhlc2UgZmlsZXMgaW4gYXNzZXRzIHdpdGggdGhlaXIgaW1hZ2VzP1xuY29uc3QgdWlzaGVldERhdGE6IElTcHJpdGVzaGVldERhdGEgID0ge1xuICBwYXRoOiAnYXNzZXRzL3VpL1VJU3ByaXRlcy5wbmcnLFxuICBkYXRhOiB7XG4gICAgdHlwZTogJ1VJJyxcbiAgICBzcHJpdGVzOiB7XG4gICAgICAwOiB7XG4gICAgICAgIG5hbWU6ICdjdXJzb3InLFxuICAgICAgICB4OiA0NCxcbiAgICAgICAgeTogNixcbiAgICAgICAgdzogMjgsXG4gICAgICAgIGg6IDMxLFxuICAgICAgICBheDogLTMsXG4gICAgICAgIGF5OiAtMyxcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdWlzaGVldERhdGEiLCJpbXBvcnQgSVNwcml0ZXNoZWV0RGF0YSBmcm9tICcuLi9JU3ByaXRlc2hlZXREYXRhJ1xuLy8gU3RvcmUgdGhlc2UgZmlsZXMgaW4gYXNzZXRzIHdpdGggdGhlaXIgaW1hZ2VzP1xuY29uc3QgdW5pdHNoZWV0RGF0YTogSVNwcml0ZXNoZWV0RGF0YSA9IHtcbiAgcGF0aDogJ2Fzc2V0cy91bml0cy91bml0U3ByaXRlcy5wbmcnLFxuICBkYXRhOiB7XG4gICAgdHlwZTogJ3VuaXRzJyxcbiAgICBzcHJpdGVzOiB7XG4gICAgICAwOiB7XG4gICAgICAgIG5hbWU6ICdpbmZhbnRhcnlfb3JhbmdlJyxcbiAgICAgICAgeDogMjQsXG4gICAgICAgIHk6IDQsXG4gICAgICAgIHc6IDE0LFxuICAgICAgICBoOiAxNSxcbiAgICAgICAgYXg6IDAsXG4gICAgICAgIGF5OiAxLFxuICAgICAgfSxcbiAgICAgIDQ6IHtcbiAgICAgICAgbmFtZTogJ3Rhbmtfb3JhbmdlJyxcbiAgICAgICAgeDogOTYsXG4gICAgICAgIHk6IDYsXG4gICAgICAgIHc6IDEzLFxuICAgICAgICBoOiAxMyxcbiAgICAgICAgYXg6IDIsXG4gICAgICAgIGF5OiAxLFxuICAgICAgfSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdW5pdHNoZWV0RGF0YSIsImltcG9ydCBWaWV3IGZyb20gJy4vdmlldy92aWV3J1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyL2NvbnRyb2xsZXInXG5pbXBvcnQgVUlNb2RlbCBmcm9tICcuL21vZGVsL3VpTW9kZWwvdWlNb2RlbCdcbmltcG9ydCBNZWRpYXRvciBmcm9tICcuL21vZGVsL2xvZ2ljTW9kZWwvbWVkaWF0b3IvbWVkaWF0b3InXG5pbXBvcnQgSW1hZ2VMb2FkZXIgZnJvbSAnLi92aWV3L3N1YnJlbmRlcmVycy9pbWFnZUxvYWRlci9pbWFnZUxvYWRlcic7XG5pbXBvcnQgTG9naWNNb2RlbCBmcm9tICcuL21vZGVsL2xvZ2ljTW9kZWwvbG9naWNNb2RlbCc7XG5cbi8vIExvYWQgc3ByaXRlc2hlZXREYXRhIGJ5IGNvbmZpZz9cbmltcG9ydCB0ZXJyYWluc2hlZXREYXRhIGZyb20gJy4uL2Fzc2V0cy90ZXJyYWluL3RlcnJhaW5zaGVldERhdGEnXG5pbXBvcnQgdWlzaGVldERhdGEgZnJvbSAnLi4vYXNzZXRzL3VpL3VpU2hlZXREYXRhJ1xuaW1wb3J0IHVuaXRzaGVldERhdGEgZnJvbSAnLi4vYXNzZXRzL3VuaXRzL3VuaXRzaGVldERhdGEnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2luZSB7XG4gIHZpZXc6IFZpZXc7XG4gIGNvbnRyb2xsZXI6IENvbnRyb2xsZXI7XG4gIHVpTW9kZWw6IFVJTW9kZWw7XG4gIGxvZ2ljTW9kZWw6IExvZ2ljTW9kZWw7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICAvLyB0aGlzIGNvdWxkIGJlIGBuZXcgTG9naWNNb2RlbCgpYCBpbiBhIGxvY2FsIHZlcnNpb24sIGFzIG1lZGlhdG9yIHdpbGwgaW1wbGVtZW50IHRoZSBMb2dpY01vZGVsIGludGVyZmFjZVxuICAgIHRoaXMubG9naWNNb2RlbCA9IG5ldyBNZWRpYXRvcigpXG4gICAgdGhpcy51aU1vZGVsID0gbmV3IFVJTW9kZWwodGhpcy5sb2dpY01vZGVsKVxuXG4gICAgdGhpcy52aWV3ID0gbmV3IFZpZXcodGhpcy5sb2dpY01vZGVsLCB0aGlzLnVpTW9kZWwsIHt0ZXJyYWluOiB0ZXJyYWluc2hlZXREYXRhLCB1aTogdWlzaGVldERhdGEsIHVuaXRzOiB1bml0c2hlZXREYXRhfSkgLy8gZ2V0IHNwcml0ZXNoZWV0IGRhdGEgZnJvbSBhIGNvbmZpZyBmaWxlP1xuICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKHRoaXMudWlNb2RlbCkgLy8gQW5kIHRoaXMudmlldyBpZiB1c2luZyBtb3VzZSBpbnB1dD9cblxuICAgIHRoaXMucGVyZm9ybUFzeW5jU2V0dXAoKVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybUFzeW5jU2V0dXAoKSB7XG4gICAgLy8gQ2FsbCBhbmQgYXdhaXQgYWxsIGluaXRpYWwgYXN5bmMgZnVuY3Rpb25zIGhlcmUuXG4gICAgLy8gRWcuIHRoaXMudmlldy5sb2FkU3ByaXRlc2hlZXRzKClcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBJbWFnZUxvYWRlci5sb2FkKHRlcnJhaW5zaGVldERhdGEsIHVpc2hlZXREYXRhLCB1bml0c2hlZXREYXRhKVxuICAgICAgLy8gQW55IG90aGVyIGFzeW5jIHNldCB1cCBmdW5jdGlvbnNcbiAgICBdKVxuICAgIHRoaXMucnVuR2FtZSgpXG4gIH1cblxuICBydW5HYW1lKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy52aWV3LnJlbmRlcigpXG4gICAgfSwgMTAwMCAvIDMwKVxuICB9XG59IiwiaW1wb3J0IEVuZ2luZSBmcm9tICcuLi9nYW1lRW5naW5lL2VuZ2luZSdcblxuZXhwb3J0IGRlZmF1bHQgbmV3IGNsYXNzIEFwcCB7XG4gIHJ1biAoKSB7XG4gICAgY29uc3QgZW5naW5lID0gbmV3IEVuZ2luZSgpXG4gIH1cbn0iLCJpbXBvcnQgYXBwIGZyb20gJy4vYXBwL2FwcCdcblxuYXBwLnJ1bigpIl0sInNvdXJjZVJvb3QiOiIifQ==