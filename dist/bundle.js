!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var r,i,o,a,u=function(){function t(t){this.canvas=this.setupCanvas(),this.context=this.canvas.getContext("2d"),this.cachedCanvas=document.createElement("canvas"),this.sprites=t.data.sprites}return t.prototype.render=function(n){var e=this;return n?(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),n.gridElements&&n.gridElements.forEach(function(t,n){t.forEach(function(t,r){if(void 0!==t){var i=e.sprites[t],o=16*r+(i.ax||0),a=16*n+(i.ay||0);e.context.putImageData(i.imageData,o+8,a+8)}})}),n.nonGridElements&&n.nonGridElements.forEach(function(t){var n=e.sprites[t.id],r=16*t.x+(n.ax||0),i=16*t.y+(n.ay||0);e.context.putImageData(n.imageData,r+8,i+8)}),this.cachedCanvas=t.cloneCanvas(this.canvas),this.canvas):this.cachedCanvas},t.cloneCanvas=function(t){var n=document.createElement("canvas"),e=n.getContext("2d");return n.width=t.width,n.height=t.height,e.drawImage(t,0,0),n},t.prototype.setupCanvas=function(){var t=document.createElement("canvas");return t.height=600,t.width=800,t},t}(),c=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n}(u),f=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n}(u),p=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return p(n,t),n}(u),d=function(){function t(){}return t.getTerrainScreenObjects=function(t){return{gridElements:t.terrain.mapIdGrid}},t.getUnitsScreenObjects=function(t){var n=[];return t.units.forEach(function(t){n[t.gridPosX][t.gridPosX]=t.id}),{gridElements:n}},t}(),y=function(){function t(t,n,e){this.logicModel=t,this.uiModel=n,this.mainCanvas=this.setupMainCanvas(),this.mainContext=this.mainCanvas.getContext("2d"),this.bgRenderer=new s(e.terrain),this.uiRenderer=new h(e.ui),this.unitRenderer=new l(e.units)}return t.prototype.render=function(){var t=this.getGameState(),n=d.getTerrainScreenObjects(t),e=d.getUnitsScreenObjects(t),r=this.renderGame(n,e),i=r[0],o=r[1],a=this.getUIState(),u=this.renderUI(a);this.paintToMainCanvas(i,o,u)},t.prototype.paintToMainCanvas=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.mainContext.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height),n.forEach(function(n){t.mainContext.drawImage(n,0,0)})},t.prototype.renderGame=function(t,n){return[this.bgRenderer.render(t),this.unitRenderer.render(n)]},t.prototype.renderUI=function(t){return this.uiRenderer.render(t)},t.prototype.getGameState=function(){return this.logicModel.getState()},t.prototype.getUIState=function(){return this.uiModel.getState()},t.prototype.setupMainCanvas=function(){var t=document.getElementById("canvas");return t.height=600,t.width=800,t},t}(),v=function(){function t(t){this.keyMappings={w:"up",s:"down",a:"left",d:"right"," ":"A"},this.uiModel=t,document.onkeypress=this.handleKeyPress.bind(this)}return t.prototype.handleKeyPress=function(t){var n=this.keyMappings[t.key.toLowerCase()];n&&this.uiModel.send(n)},t}(),m=function(){function t(t,n,e){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.instructions={up:function(){},down:function(){},left:function(){},right:function(){},A:function(){},B:function(){},L:function(){},R:function(){},start:function(){},select:function(){}},this.position={x:t,y:n,z:e},this.init(r)}return t.prototype.init=function(t){},t.prototype.sendInstruction=function(t){this.instructions[t]()},t}(),g=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),w=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.name="cursor",n.id=0,n.instructions={up:function(){n.moveUp()},down:function(){n.moveDown()},left:function(){n.moveLeft()},right:function(){n.moveRight()},A:function(){},B:function(){},L:function(){},R:function(){},start:function(){},select:function(){}},n}return g(n,t),n.prototype.moveUp=function(t){void 0===t&&(t=1),this.position.y>0&&(this.position.y-=t)},n.prototype.moveDown=function(t){void 0===t&&(t=1),this.position.y+=t},n.prototype.moveLeft=function(t){void 0===t&&(t=1),this.position.x>0&&(this.position.x-=t)},n.prototype.moveRight=function(t){void 0===t&&(t=1),this.position.x+=t},n}(m),b=function(){function t(t){this.currentUIState={gridElements:Array.from(Array(32),function(t){return Array(32)})},this.objects=[],console.log(this.currentUIState),this.gameState=t.getState(),this.cursor=this.create(w,{x:0,y:0,z:0}),this.select(this.cursor),this.refreshState()}return t.prototype.send=function(t){this.selectedObject.sendInstruction(t);var n=this.selectedObject.position,e=n.x,r=n.y;this.refreshState(),this.currentUIState.gridElements[r][e]=this.selectedObject.id},t.prototype.create=function(t,n,e){var r=new t(n.x,n.y,n.z);return e&&e(r),this.objects.push(r),r},t.prototype.refreshState=function(){var t=this;this.currentUIState.gridElements=Array.from(Array(32),function(t){return Array(32)}),this.objects=this.objects.sort(function(t,n){return t.position.z-n.position.z}),this.objects.forEach(function(n){var e=n.position,r=e.x,i=e.y;t.currentUIState.gridElements[i][r]=n.id})},t.prototype.getState=function(){return this.currentUIState},t.prototype.select=function(t){this.selectedObject=t||this.cursor},t}(),x=function(){function t(){}return t.prototype.getState=function(){},t}(),_=function(){return function(){}}(),S=function(){function t(t,n,e,r){this.loadedUnits=[],this.hidden=!1,this.type=t,this.playerId=n,this.gridPosX=e,this.gridPosY=r,this.currentHealth=t.totalHealth,this.currentFuel=t.maxFuel,this.currentAmmo=t.maxAmmo}return t.prototype.destroy=function(){this.gridPosX=this.gridPosY=this.currentAmmo=this.currentFuel=this.currentHealth=-1},t.prototype.damage=function(t){this.currentHealth-=t,this.currentHealth<0&&this.destroy()},t}();!function(t){t[t.infantary=0]="infantary",t[t.vehicle=1]="vehicle",t[t.helicopter=2]="helicopter",t[t.plane=3]="plane",t[t.ship=4]="ship",t[t.submarine=5]="submarine"}(i||(i={})),function(t){t[t.direct=0]="direct",t[t.indirect=1]="indirect"}(o||(o={})),function(t){t[t.capture=0]="capture",t[t.dive=1]="dive",t[t.load=2]="load"}(a||(a={}));var O={id:4,name:"tank",totalHealth:100,type:i.vehicle,visionRange:3,movementRange:5,maxFuel:80,maxAmmo:8,weapons:{primary:{name:"cannon",type:o.direct,baseDamage:70,efficacy:{infantary:1,vehicle:1,helicopter:1,plane:1,ship:1,submarine:1}}},abilities:[]},I=new _,j=function(){function t(){this.logicModel=new x}return t.prototype.getState=function(){return{gameID:1,numberOfPlayers:1,players:[{id:0,player:I,money:1e3,color:"orange"}],terrain:{sizeX:5,sizeY:5,mapIdGrid:[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]},units:[new S(O,0,2,2),new S(O,0,2,3),new S(O,0,5,3),new S(O,0,4,4)]}},t}(),P=function(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new e(function(n){n(t.value)}).then(a,u)}c((r=r.apply(t,n||[])).next())})},C=function(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(t,a)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},E=function(){function t(){}return t.load=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return P(this,void 0,void 0,function(){var e=this;return C(this,function(r){return n.forEach(function(n){return P(e,void 0,void 0,function(){var e,r,i,o;return C(this,function(a){switch(a.label){case 0:return[4,t.addImageProcess(n.path)];case 1:for(i in e=a.sent(),r=t.getContext(e),n.data.sprites)(o=n.data.sprites[i]).imageData=t.getImageData(o,r);return[2]}})})}),[2]})})},t.getContext=function(n){var e=t.setupCanvas(n).getContext("2d");return e.drawImage(n,0,0),e},t.setupCanvas=function(t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n},t.addImageProcess=function(t){return new Promise(function(n,e){var r=new Image;r.onload=function(){return n(r)},r.onerror=function(t){return e(t)},r.src=t})},t.getImageData=function(t,n){var e=t.x,r=t.y,i=t.w,o=t.h;return n.getImageData(e,r,i,o)},t}(),M={path:"assets/terrain/spriteSheet.png",data:{type:"terrain",sprites:{0:{name:"sea",x:340,y:1567,w:16,h:16},1:{name:"grass",x:217,y:1567,w:16,h:16}}}},A={path:"assets/ui/UISprites.png",data:{type:"UI",sprites:{0:{name:"cursor",x:44,y:6,w:28,h:31,ax:-3,ay:-3}}}},U={path:"assets/units/unitSprites.png",data:{type:"units",sprites:{0:{name:"infantary_orange",x:24,y:4,w:14,h:15,ax:0,ay:1},4:{name:"tank_orange",x:96,y:6,w:13,h:13,ax:1,ay:3}}}},k=function(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new e(function(n){n(t.value)}).then(a,u)}c((r=r.apply(t,n||[])).next())})},R=function(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(t,a)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},D=function(){function t(){this.logicModel=new j,this.uiModel=new b(this.logicModel),this.view=new y(this.logicModel,this.uiModel,{terrain:M,ui:A,units:U}),this.controller=new v(this.uiModel),this.performAsyncSetup()}return t.prototype.performAsyncSetup=function(){return k(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,Promise.all([E.load(M,A,U)])];case 1:return t.sent(),this.runGame(),[2]}})})},t.prototype.runGame=function(){var t=this;setInterval(function(){t.view.render()},1e3/30)},t}();(new(function(){function t(){}return t.prototype.run=function(){new D},t}())).run()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy9zdWJyZW5kZXJlcnMvc3VicmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvbW9kZWwvbG9naWNNb2RlbC91bml0L3VuaXREYXRhU3RydWN0dXJlLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL3ZpZXcvc3VicmVuZGVyZXJzL2JnUmVuZGVyZXIvYmdSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS92aWV3L3N1YnJlbmRlcmVycy91aVJlbmRlcmVyL3VpUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy9zdWJyZW5kZXJlcnMvdW5pdFJlbmRlcmVyLnRzL3VuaXRSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS92aWV3L2dhbWVTdGF0ZVBhcnNlci9nYW1lU3RhdGVQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvdmlldy92aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL2NvbnRyb2xsZXIvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC91aU1vZGVsL3VpT2JqZWN0cy91aU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC91aU1vZGVsL3VpT2JqZWN0cy9jdXJzb3IvY3Vyc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL21vZGVsL3VpTW9kZWwvdWlNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC9sb2dpY01vZGVsL2xvZ2ljTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVFbmdpbmUvbW9kZWwvbG9naWNNb2RlbC9wbGF5ZXIvcGxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL21vZGVsL2xvZ2ljTW9kZWwvdW5pdC91bml0LnRzIiwid2VicGFjazovLy8uL3NyYy9yZXNvdXJjZXMvdW5pdHMvdGFuay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUVuZ2luZS9tb2RlbC9sb2dpY01vZGVsL21lZGlhdG9yL21lZGlhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL3ZpZXcvc3VicmVuZGVyZXJzL2ltYWdlTG9hZGVyL2ltYWdlTG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvdGVycmFpbi90ZXJyYWluc2hlZXREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvdWkvdWlTaGVldERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy91bml0cy91bml0c2hlZXREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lRW5naW5lL2VuZ2luZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1bml0S2luZCIsIndlYXBvblR5cGUiLCJ1bml0QWJpbGl0eSIsIlN1YnJlbmRlcmVyIiwic3ByaXRlc2hlZXREYXRhIiwidGhpcyIsImNhbnZhcyIsInNldHVwQ2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjYWNoZWRDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcHJpdGVzIiwiZGF0YSIsInJlbmRlciIsInNjcmVlbk9iamVjdHMiLCJfdGhpcyIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZ3JpZEVsZW1lbnRzIiwiZm9yRWFjaCIsInJvdyIsInJvd051bWJlciIsImlkIiwiY29sTnVtYmVyIiwidW5kZWZpbmVkIiwic3ByaXRlIiwieCIsImF4IiwieSIsImF5IiwicHV0SW1hZ2VEYXRhIiwiaW1hZ2VEYXRhIiwibm9uR3JpZEVsZW1lbnRzIiwiZWxlbWVudCIsImNsb25lQ2FudmFzIiwib2xkQ2FudmFzIiwibmV3Q2FudmFzIiwiZHJhd0ltYWdlIiwiX3N1cGVyIiwiQmdSZW5kZXJlciIsIl9fZXh0ZW5kcyIsInN1YnJlbmRlcmVyIiwiVUlSZW5kZXJlciIsInVpUmVuZGVyZXJfZXh0ZW5kcyIsIlVuaXRSZW5kZXJlciIsInVuaXRSZW5kZXJlcl9leHRlbmRzIiwiR2FtZVN0YXRlUGFyc2VyIiwiZ2V0VGVycmFpblNjcmVlbk9iamVjdHMiLCJnYW1lU3RhdGUiLCJ0ZXJyYWluIiwibWFwSWRHcmlkIiwiZ2V0VW5pdHNTY3JlZW5PYmplY3RzIiwidW5pdHNBc0FycmF5IiwidW5pdHMiLCJ1bml0IiwiZ3JpZFBvc1giLCJWaWV3IiwibG9naWNNb2RlbCIsInVpTW9kZWwiLCJzcHJpdGVzaGVldHMiLCJtYWluQ2FudmFzIiwic2V0dXBNYWluQ2FudmFzIiwibWFpbkNvbnRleHQiLCJiZ1JlbmRlcmVyIiwidWlSZW5kZXJlciIsInVpIiwidW5pdFJlbmRlcmVyIiwiZ2V0R2FtZVN0YXRlIiwidGVycmFpblNjcmVlbk9iamVjdHMiLCJnYW1lU3RhdGVQYXJzZXIiLCJ1bml0c1NjcmVlbk9iamVjdHMiLCJfYSIsInJlbmRlckdhbWUiLCJ0ZXJyYWluQ2FudmFzIiwidW5pdENhbnZhcyIsInVpU3RhdGUiLCJnZXRVSVN0YXRlIiwidWlDYW52YXMiLCJyZW5kZXJVSSIsInBhaW50VG9NYWluQ2FudmFzIiwiY2FudmFzZXMiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuaXRTY3JlZW5PYmplY3RzIiwiZ2V0U3RhdGUiLCJnZXRFbGVtZW50QnlJZCIsIkNvbnRyb2xsZXIiLCJrZXlNYXBwaW5ncyIsInciLCJhIiwiICIsIm9ua2V5cHJlc3MiLCJoYW5kbGVLZXlQcmVzcyIsImUiLCJpbnB1dCIsInRvTG93ZXJDYXNlIiwic2VuZCIsIlVJT2JqZWN0IiwieiIsImFyZ3MiLCJpbnN0cnVjdGlvbnMiLCJ1cCIsImRvd24iLCJsZWZ0IiwicmlnaHQiLCJBIiwiQiIsIkwiLCJSIiwic3RhcnQiLCJzZWxlY3QiLCJwb3NpdGlvbiIsImluaXQiLCJzZW5kSW5zdHJ1Y3Rpb24iLCJpbnN0cnVjdGlvbiIsIkN1cnNvciIsImFwcGx5IiwibW92ZVVwIiwibW92ZURvd24iLCJtb3ZlTGVmdCIsIm1vdmVSaWdodCIsImN1cnNvcl9leHRlbmRzIiwidWlPYmplY3QiLCJVSU1vZGVsIiwiY3VycmVudFVJU3RhdGUiLCJBcnJheSIsImZyb20iLCJvYmplY3RzIiwiY29uc29sZSIsImxvZyIsImN1cnNvciIsInJlZnJlc2hTdGF0ZSIsInNlbGVjdGVkT2JqZWN0IiwiVUlPYmplY3RDbGFzcyIsInNldHVwRm4iLCJwdXNoIiwic29ydCIsImIiLCJMb2dpY01vZGVsIiwiVW5pdCIsInVuaXRUeXBlIiwicGxheWVySWQiLCJsb2FkZWRVbml0cyIsImhpZGRlbiIsInR5cGUiLCJncmlkUG9zWSIsImN1cnJlbnRIZWFsdGgiLCJ0b3RhbEhlYWx0aCIsImN1cnJlbnRGdWVsIiwibWF4RnVlbCIsImN1cnJlbnRBbW1vIiwibWF4QW1tbyIsImRlc3Ryb3kiLCJkYW1hZ2UiLCJ1bml0c190YW5rIiwidmVoaWNsZSIsInZpc2lvblJhbmdlIiwibW92ZW1lbnRSYW5nZSIsIndlYXBvbnMiLCJwcmltYXJ5IiwiZGlyZWN0IiwiYmFzZURhbWFnZSIsImVmZmljYWN5IiwiaW5mYW50YXJ5IiwiaGVsaWNvcHRlciIsInBsYW5lIiwic2hpcCIsInN1Ym1hcmluZSIsImFiaWxpdGllcyIsIm15UGxheWVyIiwicGxheWVyIiwiTWVkaWF0b3IiLCJsb2dpY01vZGVsX2xvZ2ljTW9kZWwiLCJnYW1lSUQiLCJudW1iZXJPZlBsYXllcnMiLCJwbGF5ZXJzIiwibW9uZXkiLCJjb2xvciIsInNpemVYIiwic2l6ZVkiLCJJbWFnZUxvYWRlciIsImxvYWQiLCJzcHJpdGVzaGVldERhdGFBcnJheSIsIl9fYXdhaXRlciIsImFkZEltYWdlUHJvY2VzcyIsInBhdGgiLCJzcHJpdGVzaGVldCIsInNlbnQiLCJ0ZW1wQ29udGV4dCIsImdldEltYWdlRGF0YSIsImltYWdlIiwic3JjIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJlcnIiLCJoIiwidGVycmFpbl90ZXJyYWluc2hlZXREYXRhIiwiMCIsIjEiLCJ1aVNoZWV0RGF0YSIsInVuaXRzX3VuaXRzaGVldERhdGEiLCI0IiwiRW5naW5lIiwibWVkaWF0b3IiLCJ1aU1vZGVsX3VpTW9kZWwiLCJ2aWV3IiwiY29udHJvbGxlciIsInBlcmZvcm1Bc3luY1NldHVwIiwiYWxsIiwiaW1hZ2VMb2FkZXIiLCJydW5HYW1lIiwic2V0SW50ZXJ2YWwiLCJBcHAiLCJydW4iLCJnYW1lRW5naW5lX2VuZ2luZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFB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SUMsR0FFdkJGLEVBSmUsS0NBWEMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnc3JjL2Fzc2V0cy9JU3ByaXRlc2hlZXREYXRhJ1xuaW1wb3J0IElTY3JlZW5PYmplY3RzIGZyb20gJy4uLy4uL21vZGVsL0lTY3JlZW5PYmplY3RzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3VicmVuZGVyZXIge1xuICBzcHJpdGVzOiBJU3ByaXRlc2hlZXREYXRhWydkYXRhJ11bJ3Nwcml0ZXMnXTtcbiAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBjYWNoZWRDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKHNwcml0ZXNoZWV0RGF0YTogSVNwcml0ZXNoZWV0RGF0YSl7XG4gICAgdGhpcy5jYW52YXMgPSB0aGlzLnNldHVwQ2FudmFzKClcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgdGhpcy5jYWNoZWRDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIHRoaXMuc3ByaXRlcyA9IHNwcml0ZXNoZWV0RGF0YS5kYXRhLnNwcml0ZXNcbiAgfVxuXG4gIHJlbmRlcihzY3JlZW5PYmplY3RzPzogSVNjcmVlbk9iamVjdHMpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGNhY2hlZCBjYW52YXMgaWYgbm8gbmV3IHN0YXRlIGhhcyBiZWVuIGdpdmVuXG4gICAgaWYgKCFzY3JlZW5PYmplY3RzKSByZXR1cm4gdGhpcy5jYWNoZWRDYW52YXNcblxuICAgIC8vIENsZWFyIHRoZSBleGlzdGluZyBjYW52YXMgY29udGV4dCBcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpXG5cbiAgICAvLyBDeWNsZSB0aHJvdWdoIHRoZSBzdGF0ZSdzIGlkR3JpZCBhbmQgcmVuZGVyIGVhY2ggc3ByaXRlIHRvIHRoZSBjb250ZXh0XG4gICAgLy8gSXMgdGhpcyBmdW5jdGlvbiB0b28gbmVzdGVkPyBSZWZhY3Rvcj9cbiAgICBpZiAoc2NyZWVuT2JqZWN0cy5ncmlkRWxlbWVudHMpIHtcbiAgICAgIHNjcmVlbk9iamVjdHMuZ3JpZEVsZW1lbnRzLmZvckVhY2goKHJvdywgcm93TnVtYmVyKSA9PiB7XG4gICAgICAgIHJvdy5mb3JFYWNoKChpZCwgY29sTnVtYmVyKSA9PiB7XG4gICAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gdGhpcy5zcHJpdGVzW2lkXVxuICAgICAgICAgICAgY29uc3QgeCA9IGNvbE51bWJlciAqIDE2ICsgKHNwcml0ZS5heCB8fCAwKSAvLyBUaWxlIHdpZHRoIChnZXQgZnJvbSB3aGVyZT8pXG4gICAgICAgICAgICBjb25zdCB5ID0gcm93TnVtYmVyICogMTYgKyAoc3ByaXRlLmF5IHx8IDApXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHNwcml0ZS5pbWFnZURhdGEsIHggKyA4LCB5ICsgOCkgLy8gVE9ETyBXSFkgKyA4ID8/XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZihzY3JlZW5PYmplY3RzLm5vbkdyaWRFbGVtZW50cyl7XG4gICAgICBzY3JlZW5PYmplY3RzLm5vbkdyaWRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHNwcml0ZSA9IHRoaXMuc3ByaXRlc1tlbGVtZW50LmlkXVxuICAgICAgICBjb25zdCB4ID0gZWxlbWVudC54ICogMTYgKyAoc3ByaXRlLmF4IHx8IDApIC8vIFRpbGUgd2lkdGggKGdldCBmcm9tIHdoZXJlPylcbiAgICAgICAgY29uc3QgeSA9IGVsZW1lbnQueSAqIDE2ICsgKHNwcml0ZS5heSB8fCAwKVxuICAgICAgICB0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHNwcml0ZS5pbWFnZURhdGEsIHggKyA4LCB5ICsgOClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ2FjaGUgdGhpcyBjYW52YXMgZm9yIGZ1dHVyZSB1c2VcbiAgICB0aGlzLmNhY2hlZENhbnZhcyA9IFN1YnJlbmRlcmVyLmNsb25lQ2FudmFzKHRoaXMuY2FudmFzKVxuXG4gICAgcmV0dXJuIHRoaXMuY2FudmFzXG4gIH1cblxuICBzdGF0aWMgY2xvbmVDYW52YXMob2xkQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIFxuICAgIC8vY3JlYXRlIGEgbmV3IGNhbnZhc1xuICAgIHZhciBuZXdDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB2YXIgY29udGV4dCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgLy9zZXQgZGltZW5zaW9uc1xuICAgIG5ld0NhbnZhcy53aWR0aCA9IG9sZENhbnZhcy53aWR0aDtcbiAgICBuZXdDYW52YXMuaGVpZ2h0ID0gb2xkQ2FudmFzLmhlaWdodDtcblxuICAgIC8vYXBwbHkgdGhlIG9sZCBjYW52YXMgdG8gdGhlIG5ldyBvbmVcbiAgICBjb250ZXh0LmRyYXdJbWFnZShvbGRDYW52YXMsIDAsIDApO1xuXG4gICAgLy9yZXR1cm4gdGhlIG5ldyBjYW52YXNcbiAgICByZXR1cm4gbmV3Q2FudmFzO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cENhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLmhlaWdodCA9IDYwMDsgLy8gc2V0IGRpbWVuc2lvbnMgaW4gY29uZmlnP1xuICAgIGNhbnZhcy53aWR0aCA9IDgwMDtcbiAgICByZXR1cm4gY2FudmFzO1xuICB9XG59IiwiLy8gbW92ZSBleHBvcnRzIHRvIHNlcGFyYXRlIGZpbGVzP1xuXG5leHBvcnQgZW51bSB1bml0S2luZCB7XG4gICdpbmZhbnRhcnknLFxuICAndmVoaWNsZScsXG4gICdoZWxpY29wdGVyJyxcbiAgJ3BsYW5lJyxcbiAgJ3NoaXAnLFxuICAnc3VibWFyaW5lJyxcbn1cblxuZXhwb3J0IGVudW0gd2VhcG9uVHlwZSB7XG4gICdkaXJlY3QnLFxuICAnaW5kaXJlY3QnLFxufVxuXG5leHBvcnQgZW51bSB1bml0QWJpbGl0eSB7XG4gICdjYXB0dXJlJyxcbiAgJ2RpdmUnLFxuICAnbG9hZCcsXG59XG4vLyBTdGF0aWMgcHJvcGVydGllc1xuZXhwb3J0IGludGVyZmFjZSBJVW5pdCB7XG4gIGlkOiBudW1iZXIsXG4gIG5hbWU6IHN0cmluZyxcbiAgdG90YWxIZWFsdGg6IG51bWJlcixcbiAgdHlwZTogdW5pdEtpbmQsXG4gIHZpc2lvblJhbmdlOiBudW1iZXIsXG4gIG1vdmVtZW50UmFuZ2U6IG51bWJlcixcbiAgbWF4RnVlbDogbnVtYmVyLFxuICBtYXhBbW1vOiBudW1iZXIsXG4gIHdlYXBvbnM6IHtcbiAgICBwcmltYXJ5OiB7XG4gICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICB0eXBlOiB3ZWFwb25UeXBlLFxuICAgICAgcmFuZ2U/OiBudW1iZXIsXG4gICAgICBiYXNlRGFtYWdlOiBudW1iZXIsXG4gICAgICBlZmZpY2FjeToge1xuICAgICAgICBpbmZhbnRhcnk6IG51bWJlcixcbiAgICAgICAgdmVoaWNsZTogbnVtYmVyLFxuICAgICAgICBoZWxpY29wdGVyOiBudW1iZXIsXG4gICAgICAgIHBsYW5lOiBudW1iZXIsXG4gICAgICAgIHNoaXA6IG51bWJlcixcbiAgICAgICAgc3VibWFyaW5lOiBudW1iZXIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2Vjb25kYXJ5Pzoge1xuICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgdHlwZTogd2VhcG9uVHlwZSxcbiAgICAgIHJhbmdlPzogbnVtYmVyLFxuICAgICAgYmFzZURhbWFnZTogbnVtYmVyLFxuICAgICAgZWZmaWNhY3k6IHtcbiAgICAgICAgaW5mYW50YXJ5OiBudW1iZXIsXG4gICAgICAgIHZlaGljbGU6IG51bWJlcixcbiAgICAgICAgaGVsaWNvcHRlcjogbnVtYmVyLFxuICAgICAgICBwbGFuZTogbnVtYmVyLFxuICAgICAgICBzaGlwOiBudW1iZXIsXG4gICAgICAgIHN1Ym1hcmluZTogbnVtYmVyLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBjYXBhY2l0eT86IG51bWJlcixcbiAgYWJpbGl0aWVzOiB1bml0QWJpbGl0eVtdLFxufVxuIiwiaW1wb3J0IFN1YnJlbmRlcmVyIGZyb20gJy4uL3N1YnJlbmRlcmVyJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZ1JlbmRlcmVyIGV4dGVuZHMgU3VicmVuZGVyZXIge30gLy8gQWRkIGFueSBiZyBzcGVjaWZpYyByZW5kZXJpbmciLCJpbXBvcnQgU3VicmVuZGVyZXIgZnJvbSAnLi4vc3VicmVuZGVyZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJUmVuZGVyZXIgZXh0ZW5kcyBTdWJyZW5kZXJlciB7XG4gIC8vIFJlbmRlciBhY2NvcmRpbmcgdG8gVUkgbGF5ZXI/IGllIHotdmFsdWVcbn0gLy8gQWRkIGFueSBVSSBzcGVjaWZpYyByZW5kZXJpbmdcbiIsImltcG9ydCBTdWJyZW5kZXJlciBmcm9tICcuLi9zdWJyZW5kZXJlcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5pdFJlbmRlcmVyIGV4dGVuZHMgU3VicmVuZGVyZXIge30gLy8gQWRkIGFueSBVbml0IHNwZWNpZmljIHJlbmRlcmluZ1xuIiwiaW1wb3J0IElTY3JlZW5PYmplY3RzIGZyb20gXCIuLi8uLi9tb2RlbC9JU2NyZWVuT2JqZWN0c1wiO1xuaW1wb3J0IElHYW1lU3RhdGUgZnJvbSBcIi4uLy4uL21vZGVsL2xvZ2ljTW9kZWwvSUdhbWVTdGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGVQYXJzZXIge1xuICBzdGF0aWMgZ2V0VGVycmFpblNjcmVlbk9iamVjdHMgKGdhbWVTdGF0ZTogSUdhbWVTdGF0ZSk6IElTY3JlZW5PYmplY3RzIHtcbiAgICByZXR1cm4geyBncmlkRWxlbWVudHM6IGdhbWVTdGF0ZS50ZXJyYWluLm1hcElkR3JpZCB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VW5pdHNTY3JlZW5PYmplY3RzIChnYW1lU3RhdGU6IElHYW1lU3RhdGUpOiBJU2NyZWVuT2JqZWN0cyB7XG4gICAgY29uc3QgdW5pdHNBc0FycmF5OiBudW1iZXJbXVtdID0gW11cbiAgICBnYW1lU3RhdGUudW5pdHMuZm9yRWFjaCgodW5pdCkgPT4ge1xuICAgICAgdW5pdHNBc0FycmF5W3VuaXQuZ3JpZFBvc1hdW3VuaXQuZ3JpZFBvc1hdID0gdW5pdC5pZFxuICAgIH0pXG4gICAgcmV0dXJuIHsgZ3JpZEVsZW1lbnRzOiB1bml0c0FzQXJyYXkgfVxuICB9XG59IiwiaW1wb3J0IEJnUmVuZGVyZXIgZnJvbSAnLi9zdWJyZW5kZXJlcnMvYmdSZW5kZXJlci9iZ1JlbmRlcmVyJ1xuaW1wb3J0IFVJUmVuZGVyZXIgZnJvbSAnLi9zdWJyZW5kZXJlcnMvdWlSZW5kZXJlci91aVJlbmRlcmVyJztcbmltcG9ydCBVSU1vZGVsIGZyb20gJy4uL21vZGVsL3VpTW9kZWwvdWlNb2RlbCc7XG5pbXBvcnQgTG9naWNNb2RlbCBmcm9tICcuLi9tb2RlbC9sb2dpY01vZGVsL2xvZ2ljTW9kZWwnO1xuaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnLi4vLi4vYXNzZXRzL0lTcHJpdGVzaGVldERhdGEnO1xuaW1wb3J0IFVuaXRSZW5kZXJlciBmcm9tICcuL3N1YnJlbmRlcmVycy91bml0UmVuZGVyZXIudHMvdW5pdFJlbmRlcmVyJztcbmltcG9ydCBHYW1lU3RhdGVQYXJzZXIgZnJvbSAnLi9nYW1lU3RhdGVQYXJzZXIvZ2FtZVN0YXRlUGFyc2VyJztcbmltcG9ydCBJU2NyZWVuT2JqZWN0cyBmcm9tICcuLi9tb2RlbC9JU2NyZWVuT2JqZWN0cyc7XG4vLyBpbXBvcnQgVW5pdFJlbmRlcmVyIGZyb20gJy4vc3VicmVuZGVyZXJzL3VuaXRSZW5kZXJlci50cy91bml0UmVuZGVyZXInO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICBiZ1JlbmRlcmVyOiBCZ1JlbmRlcmVyO1xuICB1aVJlbmRlcmVyOiBVSVJlbmRlcmVyO1xuICB1bml0UmVuZGVyZXI6IGFueTtcbiAgdWlNb2RlbDogVUlNb2RlbDtcbiAgbG9naWNNb2RlbDogTG9naWNNb2RlbDtcbiAgbWFpbkNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIG1haW5Db250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgY29uc3RydWN0b3IobG9naWNNb2RlbDogTG9naWNNb2RlbCwgdWlNb2RlbDpVSU1vZGVsLCBzcHJpdGVzaGVldHM6e1trZXk6c3RyaW5nXTpJU3ByaXRlc2hlZXREYXRhfSkge1xuICAgIHRoaXMubG9naWNNb2RlbCA9IGxvZ2ljTW9kZWxcbiAgICB0aGlzLnVpTW9kZWwgPSB1aU1vZGVsXG5cbiAgICB0aGlzLm1haW5DYW52YXMgPSB0aGlzLnNldHVwTWFpbkNhbnZhcygpXG4gICAgdGhpcy5tYWluQ29udGV4dCA9IHRoaXMubWFpbkNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cbiAgICB0aGlzLmJnUmVuZGVyZXIgPSBuZXcgQmdSZW5kZXJlcihzcHJpdGVzaGVldHMudGVycmFpbilcbiAgICB0aGlzLnVpUmVuZGVyZXIgPSBuZXcgVUlSZW5kZXJlcihzcHJpdGVzaGVldHMudWkpXG4gICAgdGhpcy51bml0UmVuZGVyZXIgPSBuZXcgVW5pdFJlbmRlcmVyKHNwcml0ZXNoZWV0cy51bml0cylcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgLy8gUXVlc3Rpb24gLSB0aGUgdmFyaWFibGVzIGRlZmluZWQgaGVyZSBhcmUgcHVyZWx5IGZvciByZWFkYWJpbGl0eSxcbiAgICAvLyAgd291bGQgaXQgYmUgYmV0dGVyIHRvIHVzZSBhIGZ1bmN0aW9uYWwgc3R5bGUgaGVyZT9cbiAgICBjb25zdCBnYW1lU3RhdGUgPSB0aGlzLmdldEdhbWVTdGF0ZSgpXG4gICAgY29uc3QgdGVycmFpblNjcmVlbk9iamVjdHMgPSBHYW1lU3RhdGVQYXJzZXIuZ2V0VGVycmFpblNjcmVlbk9iamVjdHMoZ2FtZVN0YXRlKVxuICAgIGNvbnN0IHVuaXRzU2NyZWVuT2JqZWN0cyA9IEdhbWVTdGF0ZVBhcnNlci5nZXRVbml0c1NjcmVlbk9iamVjdHMoZ2FtZVN0YXRlKVxuICAgIGNvbnN0IFt0ZXJyYWluQ2FudmFzLCB1bml0Q2FudmFzXSA9IHRoaXMucmVuZGVyR2FtZSh0ZXJyYWluU2NyZWVuT2JqZWN0cywgdW5pdHNTY3JlZW5PYmplY3RzKVxuXG4gICAgY29uc3QgdWlTdGF0ZSA9IHRoaXMuZ2V0VUlTdGF0ZSgpXG5cbiAgICAvLyBVbmNvbW1lbnQgd2hlbiBVSSBpcyByZWFkeSB0byBiZSByZW5kZXJlZFxuICAgIGNvbnN0IHVpQ2FudmFzID0gdGhpcy5yZW5kZXJVSSh1aVN0YXRlKVxuICAgIHRoaXMucGFpbnRUb01haW5DYW52YXModGVycmFpbkNhbnZhcywgdW5pdENhbnZhcywgdWlDYW52YXMpXG4gICAgLy8gdGhpcy5wYWludFRvTWFpbkNhbnZhcyhnYW1lQ2FudmFzKVxuICB9XG5cbiAgcHJpdmF0ZSBwYWludFRvTWFpbkNhbnZhcyguLi5jYW52YXNlczogSFRNTENhbnZhc0VsZW1lbnRbXSl7XG4gICAgdGhpcy5tYWluQ29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5tYWluQ2FudmFzLndpZHRoLCB0aGlzLm1haW5DYW52YXMuaGVpZ2h0KVxuICAgIGNhbnZhc2VzLmZvckVhY2goKGNhbnZhcykgPT4ge1xuICAgICAgLy8gVE9ETyBJZiB5b3UgYXJlIHdvbmRlcmluZyB3aHkgdGhlIGVsZW1lbnRzIGFyZSBvZmYtbGluZSwgc2VlIHRvZG8gaW4gU3VicmVuZGVyZXIucmVuZGVyXG4gICAgICB0aGlzLm1haW5Db250ZXh0LmRyYXdJbWFnZShjYW52YXMsIDAsIDApXG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyR2FtZSh0ZXJyYWluU2NyZWVuT2JqZWN0czpJU2NyZWVuT2JqZWN0cywgdW5pdFNjcmVlbk9iamVjdHM6IElTY3JlZW5PYmplY3RzKTogSFRNTENhbnZhc0VsZW1lbnRbXXtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5iZ1JlbmRlcmVyLnJlbmRlcih0ZXJyYWluU2NyZWVuT2JqZWN0cyksXG4gICAgICB0aGlzLnVuaXRSZW5kZXJlci5yZW5kZXIodW5pdFNjcmVlbk9iamVjdHMpXG4gICAgXVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJVSSh1aVN0YXRlOiBJU2NyZWVuT2JqZWN0cyk6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy51aVJlbmRlcmVyLnJlbmRlcih1aVN0YXRlKVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRHYW1lU3RhdGUoKXtcbiAgICByZXR1cm4gdGhpcy5sb2dpY01vZGVsLmdldFN0YXRlKClcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VUlTdGF0ZSgpe1xuICAgIHJldHVybiB0aGlzLnVpTW9kZWwuZ2V0U3RhdGUoKVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cE1haW5DYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQge1xuICAgIGNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XG4gICAgY2FudmFzLmhlaWdodCA9IDYwMDsgLy8gc2V0IGRpbWVuc2lvbnMgaW4gY29uZmlnP1xuICAgIGNhbnZhcy53aWR0aCA9IDgwMDtcbiAgICByZXR1cm4gY2FudmFzO1xuICB9XG59IiwiaW1wb3J0IFVJTW9kZWwgZnJvbSBcIi4uL21vZGVsL3VpTW9kZWwvdWlNb2RlbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgdWlNb2RlbDogVUlNb2RlbDtcblxuICBrZXlNYXBwaW5nczoge1trZXluYW1lOiBzdHJpbmddOiBzdHJpbmd9ID0ge1xuICAgIHc6ICd1cCcsIC8vIHdcbiAgICBzOiAnZG93bicsIC8vIHNcbiAgICBhOiAnbGVmdCcsIC8vIGFcbiAgICBkOiAncmlnaHQnLCAvLyBkXG4gICAgJyAnOiAnQScsIC8vIHNwYWNlXG4gIH1cblxuICBjb25zdHJ1Y3Rvcih1aU1vZGVsOiBVSU1vZGVsKXtcbiAgICB0aGlzLnVpTW9kZWwgPSB1aU1vZGVsXG4gICAgZG9jdW1lbnQub25rZXlwcmVzcyA9IHRoaXMuaGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlS2V5UHJlc3MoZTogS2V5Ym9hcmRFdmVudCl7XG4gICAgLy8gVGhpbmsgb2YgYSBzb2x1dGlvbiB0byBkZWFsIHdpdGggbXVsdGlwbGUga2V5IHByZXNzZXM/IChFZy4gaG9sZGluZyBCIHRvIHNlZSB0aGUgcmFuZ2VcbiAgICAvLyAgb2YgdGhlIHVuaXQsIGFuZCB1c2luZyB0aGUgYXJyb3cga2V5cyB0byBuYXZpZ2F0ZSBhcm91bmQgdGhlIG1hcD8pXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzLmtleU1hcHBpbmdzW2Uua2V5LnRvTG93ZXJDYXNlKCldXG4gICAgaWYoaW5wdXQpe1xuICAgICAgdGhpcy51aU1vZGVsLnNlbmQoaW5wdXQpXG4gICAgfVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgVUlPYmplY3Qge1xuICBwb3NpdGlvbjoge1xuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgejogbnVtYmVyLFxuICB9XG4gIG5hbWU6c3RyaW5nXG4gIGlkOiBudW1iZXJcblxuICBpbnN0cnVjdGlvbnM6IHtba2V5OnN0cmluZ106IEZ1bmN0aW9ufSA9IHtcbiAgICB1cDogKCkgPT4ge30sXG4gICAgZG93bjogKCkgPT4ge30sXG4gICAgbGVmdDogKCkgPT4ge30sXG4gICAgcmlnaHQ6ICgpID0+IHt9LFxuICAgIEE6ICgpID0+IHt9LFxuICAgIEI6ICgpID0+IHt9LFxuICAgIEw6ICgpID0+IHt9LFxuICAgIFI6ICgpID0+IHt9LFxuICAgIHN0YXJ0OiAoKSA9PiB7fSxcbiAgICBzZWxlY3Q6ICgpID0+IHt9LFxuICB9XG5cbiAgY29uc3RydWN0b3IoeDpudW1iZXIsIHk6bnVtYmVyLCB6Om51bWJlciwgLi4uYXJnczphbnkpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0ge3g6IHgsIHk6IHksIHo6IHp9XG4gICAgdGhpcy5pbml0KGFyZ3MpXG4gIH1cblxuICBpbml0KGFyZ3M6IGFueVtdKTogdm9pZCB7fTtcblxuICBzZW5kSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb246c3RyaW5nKSB7XG4gICAgdGhpcy5pbnN0cnVjdGlvbnNbaW5zdHJ1Y3Rpb25dKClcbiAgfVxufSIsImltcG9ydCBVSU9iamVjdCBmcm9tIFwiLi4vdWlPYmplY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3Vyc29yIGV4dGVuZHMgVUlPYmplY3Qge1xuICAvLyBoYXZlIGEgbGF5ZXIgKHotdmFsdWUpIGFzc29jaWF0ZWQgd2l0aCB1aU9iamVjdHMgYW5kIHJlbmRlciB0aGVtIGluIG9yZGVyP1xuICBuYW1lOiBzdHJpbmcgPSAnY3Vyc29yJ1xuICBpZDogbnVtYmVyID0gMFxuICBpbnN0cnVjdGlvbnM6IHtba2V5OnN0cmluZ106IEZ1bmN0aW9ufSA9IHtcbiAgICB1cDogKCkgPT4geyB0aGlzLm1vdmVVcCgpIH0sXG4gICAgZG93bjogKCkgPT4geyB0aGlzLm1vdmVEb3duKCkgfSxcbiAgICBsZWZ0OiAoKSA9PiB7IHRoaXMubW92ZUxlZnQoKSB9LFxuICAgIHJpZ2h0OiAoKSA9PiB7IHRoaXMubW92ZVJpZ2h0KCkgfSxcbiAgICBBOiAoKSA9PiB7fSxcbiAgICBCOiAoKSA9PiB7fSxcbiAgICBMOiAoKSA9PiB7fSxcbiAgICBSOiAoKSA9PiB7fSxcbiAgICBzdGFydDogKCkgPT4ge30sXG4gICAgc2VsZWN0OiAoKSA9PiB7fSxcbiAgfVxuXG4gIG1vdmVVcChuOm51bWJlciA9IDEpe1xuICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgPiAwKSB0aGlzLnBvc2l0aW9uLnkgLT0gblxuICB9XG4gIG1vdmVEb3duKG46bnVtYmVyID0gMSl7XG4gICAgdGhpcy5wb3NpdGlvbi55ICs9IG5cbiAgfVxuICBtb3ZlTGVmdChuOm51bWJlciA9IDEpe1xuICAgIGlmICh0aGlzLnBvc2l0aW9uLnggPiAwKSB0aGlzLnBvc2l0aW9uLnggLT0gblxuICB9XG4gIG1vdmVSaWdodChuOm51bWJlciA9IDEpe1xuICAgIHRoaXMucG9zaXRpb24ueCArPSBuXG4gIH1cbn0iLCJpbXBvcnQgTG9naWNNb2RlbCBmcm9tIFwiLi4vbG9naWNNb2RlbC9sb2dpY01vZGVsXCI7XG5pbXBvcnQgVUlPYmplY3QgZnJvbSBcIi4vdWlPYmplY3RzL3VpT2JqZWN0XCI7XG5pbXBvcnQgQ3Vyc29yIGZyb20gXCIuL3VpT2JqZWN0cy9jdXJzb3IvY3Vyc29yXCI7XG5pbXBvcnQgSVNjcmVlbk9iamVjdHMgZnJvbSBcIi4uL0lTY3JlZW5PYmplY3RzXCI7XG5pbXBvcnQgSUdhbWVTdGF0ZSBmcm9tIFwiLi4vbG9naWNNb2RlbC9JR2FtZVN0YXRlXCI7XG5cbi8vIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIG1hbmlwdWxhdGluZyB0aGUgVUkgc3RhdGUuIE1vdmluZyBjdXJzb3IgYXJvdW5kLFxuLy8gIHNlbGVjdGluZyB1bml0cywgY2hlY2tpbmcgdW5pdHMgZXRjLlxuXG4vLyBUaGlzIGNvZGUgaXMgYmFkLlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVUlNb2RlbHtcbiAgLy8gVE9ETyBXaGVyZSBkbyB3ZSBnZXQgdGhlIGdyaWQgc2l6ZSBmcm9tP1xuICBjdXJyZW50VUlTdGF0ZTogSVNjcmVlbk9iamVjdHMgPSB7IGdyaWRFbGVtZW50czogQXJyYXkuZnJvbShBcnJheSgzMiksIHggPT4gQXJyYXkoMzIpKX1cbiAgZ2FtZVN0YXRlOiBJR2FtZVN0YXRlXG4gIHNlbGVjdGVkT2JqZWN0OiBVSU9iamVjdDtcbiAgb2JqZWN0czogVUlPYmplY3RbXSA9IFtdO1xuICBjdXJzb3I6IFVJT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yIChsb2dpY01vZGVsOkxvZ2ljTW9kZWwpe1xuICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFVJU3RhdGUpXG4gICAgdGhpcy5nYW1lU3RhdGUgPSBsb2dpY01vZGVsLmdldFN0YXRlKClcbiAgICB0aGlzLmN1cnNvciA9IHRoaXMuY3JlYXRlKEN1cnNvciwge3g6IDAsIHk6IDAsIHo6IDB9KVxuICAgIHRoaXMuc2VsZWN0KHRoaXMuY3Vyc29yKVxuICAgIHRoaXMucmVmcmVzaFN0YXRlKClcbiAgfVxuXG4gIHNlbmQgKGluc3RydWN0aW9uOnN0cmluZyl7XG4gICAgdGhpcy5zZWxlY3RlZE9iamVjdC5zZW5kSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pXG4gICAgY29uc3Qge3gsIHl9ID0gdGhpcy5zZWxlY3RlZE9iamVjdC5wb3NpdGlvblxuICAgIHRoaXMucmVmcmVzaFN0YXRlKClcbiAgICB0aGlzLmN1cnJlbnRVSVN0YXRlLmdyaWRFbGVtZW50c1t5XVt4XSA9IHRoaXMuc2VsZWN0ZWRPYmplY3QuaWQgLy8gQXdmdWwgY29kZVxuICB9XG5cblxuICBjcmVhdGUgPFQgZXh0ZW5kcyBVSU9iamVjdD4oVUlPYmplY3RDbGFzczoge25ldyh4Om51bWJlciwgeTpudW1iZXIsIHo6bnVtYmVyLCAuLi5hcmdzOmFueSk6IFR9LCBhcmdzOiB7eDogbnVtYmVyLCB5Om51bWJlciwgejpudW1iZXJ9LCBzZXR1cEZuPzogRnVuY3Rpb24pe1xuICAgIGNvbnN0IHt4LCB5LCB6fSA9IGFyZ3NcbiAgICBjb25zdCBvYmplY3QgPSBuZXcgVUlPYmplY3RDbGFzcyh4LCB5LCB6KVxuICAgIGlmIChzZXR1cEZuKSBzZXR1cEZuKG9iamVjdCkgLy8gUHJvYmFibHkgYSBiZXR0ZXIgd2F5IG9mIGRvaW5nIHRoaXNcbiAgICB0aGlzLm9iamVjdHMucHVzaChvYmplY3QpXG4gICAgcmV0dXJuIG9iamVjdFxuICB9XG5cbiAgcmVmcmVzaFN0YXRlICgpIHtcbiAgICB0aGlzLmN1cnJlbnRVSVN0YXRlLmdyaWRFbGVtZW50cyA9IEFycmF5LmZyb20oQXJyYXkoMzIpLCB4ID0+IEFycmF5KDMyKSlcblxuICAgIHRoaXMub2JqZWN0cyA9IHRoaXMub2JqZWN0cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5wb3NpdGlvbi56IC0gYi5wb3NpdGlvbi56XG4gICAgfSlcbiAgICB0aGlzLm9iamVjdHMuZm9yRWFjaCgodWlPYmplY3QpID0+IHtcbiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdWlPYmplY3QucG9zaXRpb25cbiAgICAgIC8vIENoZWNrIGlmIGF0IGludGVnZXIgcG9zaXRpb24sIGFuZCByZW5kZXIgdG8gc3RhdGUgZGlmZmVyZW50bHk/IChTZWUgSVN0YXRlIGludGVyZmFjZSlcbiAgICAgIHRoaXMuY3VycmVudFVJU3RhdGUuZ3JpZEVsZW1lbnRzW3ldW3hdID0gdWlPYmplY3QuaWRcbiAgICB9KVxuICB9XG5cbiAgZ2V0U3RhdGUgKCk6SVNjcmVlbk9iamVjdHMge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVSVN0YXRlXG4gIH1cblxuICBzZWxlY3QgPFQgZXh0ZW5kcyBVSU9iamVjdD4odWlPYmplY3Q/OiBUKSB7XG4gICAgdGhpcy5zZWxlY3RlZE9iamVjdCA9IHVpT2JqZWN0ID8gdWlPYmplY3QgOiB0aGlzLmN1cnNvclxuICB9XG59IiwiaW1wb3J0IElHYW1lU3RhdGUgZnJvbSBcIi4vSUdhbWVTdGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpY01vZGVse1xuICBnZXRTdGF0ZSgpOklHYW1lU3RhdGV7cmV0dXJufVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7fSIsImltcG9ydCB7IElVbml0IH0gZnJvbSBcIi4vdW5pdERhdGFTdHJ1Y3R1cmVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5pdCB7XG4gIGlkOiBudW1iZXJcbiAgcGxheWVySWQ6IG51bWJlclxuICB0eXBlOiBJVW5pdFxuICBncmlkUG9zWDogbnVtYmVyXG4gIGdyaWRQb3NZOiBudW1iZXJcbiAgY3VycmVudEhlYWx0aDogbnVtYmVyXG4gIGN1cnJlbnRGdWVsOiBudW1iZXJcbiAgY3VycmVudEFtbW86IG51bWJlclxuICBsb2FkZWRVbml0czogVW5pdFtdID0gW11cbiAgaGlkZGVuOiBib29sZWFuID0gZmFsc2VcblxuICBjb25zdHJ1Y3Rvcih1bml0VHlwZTogSVVuaXQsIHBsYXllcklkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKXtcbiAgICAvLyB0aGlzLmlkID0gc29tZVN0YXRpY0lER2VuZXJhdGlvbk1ldGhvZCgpXG4gICAgdGhpcy50eXBlID0gdW5pdFR5cGVcbiAgICB0aGlzLnBsYXllcklkID0gcGxheWVySWRcbiAgICB0aGlzLmdyaWRQb3NYID0geFxuICAgIHRoaXMuZ3JpZFBvc1kgPSB5XG5cbiAgICB0aGlzLmN1cnJlbnRIZWFsdGggPSB1bml0VHlwZS50b3RhbEhlYWx0aFxuICAgIHRoaXMuY3VycmVudEZ1ZWwgPSB1bml0VHlwZS5tYXhGdWVsXG4gICAgdGhpcy5jdXJyZW50QW1tbyA9IHVuaXRUeXBlLm1heEFtbW9cbiAgfVxuICAvLyBPciBzb21lIG1ldGhvZCBsaWtlIHRoaXM/XG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuZ3JpZFBvc1ggPSB0aGlzLmdyaWRQb3NZID0gdGhpcy5jdXJyZW50QW1tbyA9IFxuICAgIHRoaXMuY3VycmVudEZ1ZWwgPSB0aGlzLmN1cnJlbnRIZWFsdGggPSAtMVxuICB9XG5cbiAgZGFtYWdlIChuOiBudW1iZXIpIHtcbiAgICB0aGlzLmN1cnJlbnRIZWFsdGggLT0gblxuICAgIGlmICh0aGlzLmN1cnJlbnRIZWFsdGggPCAwKSB0aGlzLmRlc3Ryb3koKVxuICB9XG59IiwiaW1wb3J0IHsgSVVuaXQsIHVuaXRLaW5kLCB3ZWFwb25UeXBlIH0gZnJvbSBcIi4uLy4uL2dhbWVFbmdpbmUvbW9kZWwvbG9naWNNb2RlbC91bml0L3VuaXREYXRhU3RydWN0dXJlXCI7XG5cbmNvbnN0IHRhbms6IElVbml0ID0ge1xuICBpZDogNCxcbiAgbmFtZTogJ3RhbmsnLFxuICB0b3RhbEhlYWx0aDogMTAwLFxuICB0eXBlOiB1bml0S2luZC52ZWhpY2xlLFxuICB2aXNpb25SYW5nZTogMyxcbiAgbW92ZW1lbnRSYW5nZTogNSxcbiAgbWF4RnVlbDogODAsXG4gIG1heEFtbW86IDgsXG4gIHdlYXBvbnM6IHtcbiAgICBwcmltYXJ5OiB7XG4gICAgICBuYW1lOiAnY2Fubm9uJyxcbiAgICAgIHR5cGU6IHdlYXBvblR5cGUuZGlyZWN0LFxuICAgICAgYmFzZURhbWFnZTogNzAsXG4gICAgICBlZmZpY2FjeToge1xuICAgICAgICBpbmZhbnRhcnk6IDEsXG4gICAgICAgIHZlaGljbGU6IDEsXG4gICAgICAgIGhlbGljb3B0ZXI6IDEsXG4gICAgICAgIHBsYW5lOiAxLFxuICAgICAgICBzaGlwOiAxLFxuICAgICAgICBzdWJtYXJpbmU6IDEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgLy8gTWFjaGluZSBndW4gZ29lcyBoZXJlXG4gICAgLy8gc2Vjb25kYXJ5Pzoge1xuICAgIC8vICAgbmFtZTogc3RyaW5nLFxuICAgIC8vICAgdHlwZTogd2VhcG9uVHlwZSxcbiAgICAvLyAgIHJhbmdlPzogbnVtYmVyLFxuICAgIC8vICAgYmFzZURhbWFnZTogbnVtYmVyLFxuICAgIC8vICAgZWZmaWNhY3k6IHtcbiAgICAvLyAgICAgaW5mYW50YXJ5OiBudW1iZXIsXG4gICAgLy8gICAgIHZlaGljbGU6IG51bWJlcixcbiAgICAvLyAgICAgaGVsaWNvcHRlcjogbnVtYmVyLFxuICAgIC8vICAgICBwbGFuZTogbnVtYmVyLFxuICAgIC8vICAgICBzaGlwOiBudW1iZXIsXG4gICAgLy8gICAgIHN1Ym1hcmluZTogbnVtYmVyLFxuICAgIC8vICAgfSxcbiAgICAvLyB9LFxuICB9LFxuICBhYmlsaXRpZXM6IFtdLFxufVxuXG5leHBvcnQgZGVmYXVsdCB0YW5rIiwiaW1wb3J0IExvZ2ljTW9kZWwgZnJvbSAnLi4vbG9naWNNb2RlbCdcbmltcG9ydCBJR2FtZVN0YXRlIGZyb20gJy4uL0lHYW1lU3RhdGUnO1xuXG5pbXBvcnQgUGxheWVyIGZyb20gJy4uL3BsYXllci9wbGF5ZXInO1xuaW1wb3J0IFVuaXQgZnJvbSAnLi4vdW5pdC91bml0JztcbmltcG9ydCB0YW5rIGZyb20gJy4uLy4uLy4uLy4uL3Jlc291cmNlcy91bml0cy90YW5rJztcblxuXG5jb25zdCBteVBsYXllciA9IG5ldyBQbGF5ZXIoKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYXRvciBpbXBsZW1lbnRzIExvZ2ljTW9kZWwge1xuICBsb2dpY01vZGVsOiBMb2dpY01vZGVsO1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMubG9naWNNb2RlbCA9IG5ldyBMb2dpY01vZGVsXG5cbiAgfVxuICBnZXRTdGF0ZSgpOiBJR2FtZVN0YXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2FtZUlEOiAxLFxuICAgICAgbnVtYmVyT2ZQbGF5ZXJzOiAxLFxuICAgICAgcGxheWVyczogW3tcbiAgICAgICAgaWQ6IDAsXG4gICAgICAgIHBsYXllcjogbXlQbGF5ZXIsIC8vIGNsYXNzXG4gICAgICAgIG1vbmV5OiAxMDAwLFxuICAgICAgICBjb2xvcjogJ29yYW5nZScsIC8vIGVudW1cbiAgICAgIH1dLFxuICAgICAgdGVycmFpbjoge1xuICAgICAgICBzaXplWDogNSwgLy8gbWlnaHQgYmUgdW5uZWNlc3NhcnkgYXMgY2FuIGJlIGdvdCBmcm9tIG1hcElkR3JpZFswXS5sZW5ndGhcbiAgICAgICAgc2l6ZVk6IDUsXG4gICAgICAgIG1hcElkR3JpZDogW1xuICAgICAgICAgIFswLDAsMSwwLDBdLFxuICAgICAgICAgIFswLDEsMSwxLDBdLFxuICAgICAgICAgIFsxLDEsMSwxLDFdLFxuICAgICAgICAgIFswLDEsMSwxLDBdLFxuICAgICAgICAgIFswLDAsMSwwLDBdLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHVuaXRzOiBbXG4gICAgICAgIG5ldyBVbml0KHRhbmssIDAsIDIsIDIpLCBcbiAgICAgICAgbmV3IFVuaXQodGFuaywgMCwgMiwgMyksIFxuICAgICAgICBuZXcgVW5pdCh0YW5rLCAwLCA1LCAzKSxcbiAgICAgICAgbmV3IFVuaXQodGFuaywgMCwgNCwgNCksXG4gICAgICBdXG4gICAgfVxuICB9XG59IiwiaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnc3JjL2Fzc2V0cy9JU3ByaXRlc2hlZXREYXRhJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZUxvYWRlciB7XG4gIHN0YXRpYyBhc3luYyBsb2FkKC4uLnNwcml0ZXNoZWV0RGF0YUFycmF5OiBJU3ByaXRlc2hlZXREYXRhW10pIHtcbiAgICBzcHJpdGVzaGVldERhdGFBcnJheS5mb3JFYWNoKGFzeW5jIChzcHJpdGVzaGVldERhdGEpID0+IHtcbiAgICAgIGNvbnN0IHNwcml0ZXNoZWV0ID0gPEhUTUxJbWFnZUVsZW1lbnQ+IGF3YWl0IEltYWdlTG9hZGVyLmFkZEltYWdlUHJvY2VzcyhzcHJpdGVzaGVldERhdGEucGF0aClcbiAgICAgIGNvbnN0IHRlbXBDb250ZXh0ID0gSW1hZ2VMb2FkZXIuZ2V0Q29udGV4dChzcHJpdGVzaGVldClcbiAgICAgIGZvciAobGV0IGlkIGluIHNwcml0ZXNoZWV0RGF0YS5kYXRhLnNwcml0ZXMpIHtcbiAgICAgICAgbGV0IHNwcml0ZSA9IHNwcml0ZXNoZWV0RGF0YS5kYXRhLnNwcml0ZXNbaWRdXG4gICAgICAgIHNwcml0ZS5pbWFnZURhdGEgPSBJbWFnZUxvYWRlci5nZXRJbWFnZURhdGEoc3ByaXRlLCB0ZW1wQ29udGV4dClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldENvbnRleHQoaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpe1xuICAgIGNvbnN0IGNhbnZhcyA9IEltYWdlTG9hZGVyLnNldHVwQ2FudmFzKGltYWdlKVxuICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMClcbiAgICByZXR1cm4gY29udGV4dFxuICB9XG5cbiAgc3RhdGljIHNldHVwQ2FudmFzKGltYWdlOkhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICBjb25zdCBjYW52YXM6SFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgcmV0dXJuIGNhbnZhc1xuICB9XG5cbiAgc3RhdGljIGFkZEltYWdlUHJvY2VzcyhzcmM6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWc6SFRNTEltYWdlRWxlbWVudCA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgIGltZy5vbmVycm9yID0gKGVycikgPT4gcmVqZWN0KGVycik7XG4gICAgICBpbWcuc3JjID0gc3JjO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldEltYWdlRGF0YSAoc3ByaXRlOiBJU3ByaXRlc2hlZXREYXRhWydkYXRhJ11bJ3Nwcml0ZXMnXVswXSwgY29udGV4dDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOkltYWdlRGF0YSB7XG4gICAgY29uc3Qge3gsIHksIHcsIGh9ID0gc3ByaXRlXG4gICAgcmV0dXJuIGNvbnRleHQuZ2V0SW1hZ2VEYXRhKHgsIHksIHcsIGgpXG4gIH1cbn0iLCJpbXBvcnQgSVNwcml0ZXNoZWV0RGF0YSBmcm9tICcuLi9JU3ByaXRlc2hlZXREYXRhJ1xuXG5jb25zdCB0ZXJyYWluc2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhID0ge1xuICBwYXRoOiAnYXNzZXRzL3RlcnJhaW4vc3ByaXRlU2hlZXQucG5nJyxcbiAgZGF0YToge1xuICAgIHR5cGU6ICd0ZXJyYWluJyxcbiAgICBzcHJpdGVzOiB7XG4gICAgICAwOiB7XG4gICAgICAgIG5hbWU6ICdzZWEnLFxuICAgICAgICB4OiAzNDAsXG4gICAgICAgIHk6IDE1NjcsXG4gICAgICAgIHc6IDE2LFxuICAgICAgICBoOiAxNlxuICAgICAgfSxcbiAgICAgIDE6IHtcbiAgICAgICAgbmFtZTogJ2dyYXNzJyxcbiAgICAgICAgeDogMjE3LCBcbiAgICAgICAgeTogMTU2NywgXG4gICAgICAgIHc6IDE2LCBcbiAgICAgICAgaDogMTYsIFxuICAgICAgfSxcbiAgICAgIC8vIGV0Yy4gZXRjLlxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB0ZXJyYWluc2hlZXREYXRhIiwiaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnLi4vSVNwcml0ZXNoZWV0RGF0YSdcbi8vIFN0b3JlIHRoZXNlIGZpbGVzIGluIGFzc2V0cyB3aXRoIHRoZWlyIGltYWdlcz9cbmNvbnN0IHVpc2hlZXREYXRhOiBJU3ByaXRlc2hlZXREYXRhICA9IHtcbiAgcGF0aDogJ2Fzc2V0cy91aS9VSVNwcml0ZXMucG5nJyxcbiAgZGF0YToge1xuICAgIHR5cGU6ICdVSScsXG4gICAgc3ByaXRlczoge1xuICAgICAgMDoge1xuICAgICAgICBuYW1lOiAnY3Vyc29yJyxcbiAgICAgICAgeDogNDQsXG4gICAgICAgIHk6IDYsXG4gICAgICAgIHc6IDI4LFxuICAgICAgICBoOiAzMSxcbiAgICAgICAgYXg6IC0zLFxuICAgICAgICBheTogLTMsXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVpc2hlZXREYXRhIiwiaW1wb3J0IElTcHJpdGVzaGVldERhdGEgZnJvbSAnLi4vSVNwcml0ZXNoZWV0RGF0YSdcbi8vIFN0b3JlIHRoZXNlIGZpbGVzIGluIGFzc2V0cyB3aXRoIHRoZWlyIGltYWdlcz9cbmNvbnN0IHVuaXRzaGVldERhdGE6IElTcHJpdGVzaGVldERhdGEgID0ge1xuICBwYXRoOiAnYXNzZXRzL3VuaXRzL3VuaXRTcHJpdGVzLnBuZycsXG4gIGRhdGE6IHtcbiAgICB0eXBlOiAndW5pdHMnLFxuICAgIHNwcml0ZXM6IHtcbiAgICAgIDA6IHtcbiAgICAgICAgbmFtZTogJ2luZmFudGFyeV9vcmFuZ2UnLFxuICAgICAgICB4OiAyNCxcbiAgICAgICAgeTogNCxcbiAgICAgICAgdzogMTQsXG4gICAgICAgIGg6IDE1LFxuICAgICAgICBheDogMCxcbiAgICAgICAgYXk6IDEsXG4gICAgICB9LFxuICAgICAgNDoge1xuICAgICAgICBuYW1lOiAndGFua19vcmFuZ2UnLFxuICAgICAgICB4OiA5NixcbiAgICAgICAgeTogNixcbiAgICAgICAgdzogMTMsXG4gICAgICAgIGg6IDEzLFxuICAgICAgICBheDogMSxcbiAgICAgICAgYXk6IDMsXG4gICAgICB9LFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1bml0c2hlZXREYXRhIiwiaW1wb3J0IFZpZXcgZnJvbSAnLi92aWV3L3ZpZXcnXG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXIvY29udHJvbGxlcidcbmltcG9ydCBVSU1vZGVsIGZyb20gJy4vbW9kZWwvdWlNb2RlbC91aU1vZGVsJ1xuaW1wb3J0IE1lZGlhdG9yIGZyb20gJy4vbW9kZWwvbG9naWNNb2RlbC9tZWRpYXRvci9tZWRpYXRvcidcbmltcG9ydCBJbWFnZUxvYWRlciBmcm9tICcuL3ZpZXcvc3VicmVuZGVyZXJzL2ltYWdlTG9hZGVyL2ltYWdlTG9hZGVyJztcbmltcG9ydCBMb2dpY01vZGVsIGZyb20gJy4vbW9kZWwvbG9naWNNb2RlbC9sb2dpY01vZGVsJztcblxuLy8gTG9hZCBzcHJpdGVzaGVldERhdGEgYnkgY29uZmlnP1xuaW1wb3J0IHRlcnJhaW5zaGVldERhdGEgZnJvbSAnLi4vYXNzZXRzL3RlcnJhaW4vdGVycmFpbnNoZWV0RGF0YSdcbmltcG9ydCB1aXNoZWV0RGF0YSBmcm9tICcuLi9hc3NldHMvdWkvdWlTaGVldERhdGEnXG5pbXBvcnQgdW5pdHNoZWV0RGF0YSBmcm9tICcuLi9hc3NldHMvdW5pdHMvdW5pdHNoZWV0RGF0YSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5naW5lIHtcbiAgdmlldzogVmlldztcbiAgY29udHJvbGxlcjogQ29udHJvbGxlcjtcbiAgdWlNb2RlbDogVUlNb2RlbDtcbiAgbG9naWNNb2RlbDogTG9naWNNb2RlbDtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIC8vIHRoaXMgY291bGQgYmUgYG5ldyBMb2dpY01vZGVsKClgIGluIGEgbG9jYWwgdmVyc2lvbiwgYXMgbWVkaWF0b3Igd2lsbCBpbXBsZW1lbnQgdGhlIExvZ2ljTW9kZWwgaW50ZXJmYWNlXG4gICAgdGhpcy5sb2dpY01vZGVsID0gbmV3IE1lZGlhdG9yKClcbiAgICB0aGlzLnVpTW9kZWwgPSBuZXcgVUlNb2RlbCh0aGlzLmxvZ2ljTW9kZWwpXG5cbiAgICB0aGlzLnZpZXcgPSBuZXcgVmlldyh0aGlzLmxvZ2ljTW9kZWwsIHRoaXMudWlNb2RlbCwge3RlcnJhaW46IHRlcnJhaW5zaGVldERhdGEsIHVpOiB1aXNoZWV0RGF0YSwgdW5pdHM6IHVuaXRzaGVldERhdGF9KSAvLyBnZXQgc3ByaXRlc2hlZXQgZGF0YSBmcm9tIGEgY29uZmlnIGZpbGU/XG4gICAgdGhpcy5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIodGhpcy51aU1vZGVsKSAvLyBBbmQgdGhpcy52aWV3IGlmIHVzaW5nIG1vdXNlIGlucHV0P1xuXG4gICAgdGhpcy5wZXJmb3JtQXN5bmNTZXR1cCgpXG4gIH1cblxuICBhc3luYyBwZXJmb3JtQXN5bmNTZXR1cCgpIHtcbiAgICAvLyBDYWxsIGFuZCBhd2FpdCBhbGwgaW5pdGlhbCBhc3luYyBmdW5jdGlvbnMgaGVyZS5cbiAgICAvLyBFZy4gdGhpcy52aWV3LmxvYWRTcHJpdGVzaGVldHMoKVxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIEltYWdlTG9hZGVyLmxvYWQodGVycmFpbnNoZWV0RGF0YSwgdWlzaGVldERhdGEsIHVuaXRzaGVldERhdGEpXG4gICAgICAvLyBBbnkgb3RoZXIgYXN5bmMgc2V0IHVwIGZ1bmN0aW9uc1xuICAgIF0pXG4gICAgdGhpcy5ydW5HYW1lKClcbiAgfVxuXG4gIHJ1bkdhbWUoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnZpZXcucmVuZGVyKClcbiAgICB9LCAxMDAwIC8gMzApXG4gIH1cbn0iLCJpbXBvcnQgRW5naW5lIGZyb20gJy4uL2dhbWVFbmdpbmUvZW5naW5lJ1xuXG5leHBvcnQgZGVmYXVsdCBuZXcgY2xhc3MgQXBwIHtcbiAgcnVuICgpIHtcbiAgICBjb25zdCBlbmdpbmUgPSBuZXcgRW5naW5lKClcbiAgfVxufSIsImltcG9ydCBhcHAgZnJvbSAnLi9hcHAvYXBwJ1xuXG5hcHAucnVuKCkiXSwic291cmNlUm9vdCI6IiJ9